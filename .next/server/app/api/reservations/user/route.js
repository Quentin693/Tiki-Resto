/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/reservations/user/route";
exports.ids = ["app/api/reservations/user/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freservations%2Fuser%2Froute&page=%2Fapi%2Freservations%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freservations%2Fuser%2Froute.ts&appDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freservations%2Fuser%2Froute&page=%2Fapi%2Freservations%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freservations%2Fuser%2Froute.ts&appDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_quentinho_Projets_Perso_Tiki_Resto_src_app_api_reservations_user_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/reservations/user/route.ts */ \"(rsc)/./src/app/api/reservations/user/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/reservations/user/route\",\n        pathname: \"/api/reservations/user\",\n        filename: \"route\",\n        bundlePath: \"app/api/reservations/user/route\"\n    },\n    resolvedPagePath: \"/Users/quentinho/Projets/Perso/Tiki-Resto/src/app/api/reservations/user/route.ts\",\n    nextConfigOutput,\n    userland: _Users_quentinho_Projets_Perso_Tiki_Resto_src_app_api_reservations_user_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyZXNlcnZhdGlvbnMlMkZ1c2VyJTJGcm91dGUmcGFnZT0lMkZhcGklMkZyZXNlcnZhdGlvbnMlMkZ1c2VyJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcmVzZXJ2YXRpb25zJTJGdXNlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnF1ZW50aW5obyUyRlByb2pldHMlMkZQZXJzbyUyRlRpa2ktUmVzdG8lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcXVlbnRpbmhvJTJGUHJvamV0cyUyRlBlcnNvJTJGVGlraS1SZXN0byZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZ0M7QUFDN0c7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9xdWVudGluaG8vUHJvamV0cy9QZXJzby9UaWtpLVJlc3RvL3NyYy9hcHAvYXBpL3Jlc2VydmF0aW9ucy91c2VyL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZXNlcnZhdGlvbnMvdXNlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Jlc2VydmF0aW9ucy91c2VyXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZXNlcnZhdGlvbnMvdXNlci9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9xdWVudGluaG8vUHJvamV0cy9QZXJzby9UaWtpLVJlc3RvL3NyYy9hcHAvYXBpL3Jlc2VydmF0aW9ucy91c2VyL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freservations%2Fuser%2Froute&page=%2Fapi%2Freservations%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freservations%2Fuser%2Froute.ts&appDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/reservations/user/route.ts":
/*!************************************************!*\
  !*** ./src/app/api/reservations/user/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\nconst API_URL = \"http://localhost:3001\" || 0;\n// Fonction pour transformer les données de réservation\nfunction transformReservation(reservation) {\n    // Extraire la date et l'heure de reservationDateTime\n    const dateTime = new Date(reservation.reservationDateTime);\n    const date = dateTime.toISOString().split('T')[0];\n    const time = dateTime.toLocaleTimeString('fr-FR', {\n        hour: '2-digit',\n        minute: '2-digit'\n    });\n    return {\n        id: reservation.id,\n        date: date,\n        time: time,\n        guests: reservation.numberOfGuests,\n        status: 'confirmed',\n        specialRequests: reservation.specialRequests,\n        userId: reservation.userId || 0,\n        customerEmail: reservation.customerEmail,\n        customerPhone: reservation.customerPhone,\n        customerName: reservation.customerName,\n        createdAt: reservation.created_at,\n        updatedAt: reservation.updated_at\n    };\n}\nasync function GET(request) {\n    try {\n        // Vérifier l'authentification\n        const authHeader = request.headers.get('authorization');\n        const token = authHeader?.split(' ')[1];\n        console.log('API route: En-tête d\\'autorisation reçu:', authHeader ? 'Présent' : 'Absent');\n        console.log('API route: Token extrait:', token ? `${token.substring(0, 15)}...` : 'Absent');\n        if (!token) {\n            console.log('API route: Token d\\'authentification manquant');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Token d\\'authentification manquant'\n            }, {\n                status: 401\n            });\n        }\n        // Vérifier et décoder le token\n        try {\n            const decoded = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.verifyAuth)(token);\n            if (!decoded || !decoded.sub) {\n                console.error('API route: Token invalide ou expiré');\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: 'Token invalide ou expiré'\n                }, {\n                    status: 401\n                });\n            }\n            console.log(`API route: Token décodé avec succès - User ID: ${decoded.sub}, Email: ${decoded.email}, Role: ${decoded.role}`);\n            // Transmettre la requête au backend\n            try {\n                console.log(`API route: Tentative d'appel vers ${API_URL}/reservations/user avec le token`);\n                let backendResponse = await fetch(`${API_URL}/reservations/user`, {\n                    method: 'GET',\n                    headers: {\n                        'Authorization': `Bearer ${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                });\n                console.log('API route: Réponse du backend pour /reservations/user:', backendResponse.status);\n                // Si la nouvelle route échoue, essayer l'ancienne route avec l'ID\n                if (backendResponse.status === 404) {\n                    console.log(`API route: Fallback vers /reservations/user/${decoded.sub}`);\n                    backendResponse = await fetch(`${API_URL}/reservations/user/${decoded.sub}`, {\n                        method: 'GET',\n                        headers: {\n                            'Authorization': `Bearer ${token}`,\n                            'Content-Type': 'application/json'\n                        }\n                    });\n                    console.log('API route: Réponse du backend pour /reservations/user/:id:', backendResponse.status);\n                }\n                if (!backendResponse.ok) {\n                    const errorBody = await backendResponse.text();\n                    const errorData = errorBody ? JSON.parse(errorBody) : {};\n                    console.error('API route: Erreur du backend:', backendResponse.status, errorData);\n                    console.error('API route: Corps de la réponse d\\'erreur:', errorBody);\n                    // Si on ne peut pas accéder au backend et qu'on est en mode développement, retourner des données de test\n                    if (true) {\n                        console.log('API route: Retour de données de test en mode développement');\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([\n                            {\n                                id: 1,\n                                date: new Date().toISOString().split('T')[0],\n                                time: '19:30',\n                                guests: 2,\n                                status: 'confirmed',\n                                specialRequests: 'Fenêtre si possible',\n                                userId: decoded.sub,\n                                customerEmail: decoded.email,\n                                customerName: 'Utilisateur Test'\n                            }\n                        ]);\n                    }\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        message: errorData.message || `Erreur ${backendResponse.status} lors de la récupération des réservations`\n                    }, {\n                        status: backendResponse.status\n                    });\n                }\n                const backendReservations = await backendResponse.json();\n                console.log(`API route: ${backendReservations.length} réservations trouvées`);\n                // Transformer les réservations au format attendu par le frontend\n                const frontendReservations = Array.isArray(backendReservations) ? backendReservations.map(transformReservation) : [];\n                console.log('API route: Réservations transformées pour le frontend:', frontendReservations);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(frontendReservations);\n            } catch (fetchError) {\n                console.error('API route: Erreur de communication avec le backend:', fetchError);\n                // En mode développement, retourner des données de test en cas d'erreur\n                if (true) {\n                    console.log('API route: Erreur backend, retour de données de test');\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json([\n                        {\n                            id: 999,\n                            date: new Date().toISOString().split('T')[0],\n                            time: '20:00',\n                            guests: 4,\n                            status: 'confirmed',\n                            specialRequests: 'Table au calme',\n                            userId: decoded.sub,\n                            customerEmail: decoded.email,\n                            customerName: 'Utilisateur Test (Mode Secours)'\n                        }\n                    ]);\n                }\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: `Impossible de communiquer avec le serveur de réservation: ${fetchError.message}`\n                }, {\n                    status: 503\n                });\n            }\n        } catch (tokenError) {\n            console.error('API route: Erreur lors de la vérification du token:', tokenError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: 'Erreur de vérification du token'\n            }, {\n                status: 401\n            });\n        }\n    } catch (error) {\n        console.error('API route: Erreur inattendue:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'Erreur lors de la récupération des réservations',\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9yZXNlcnZhdGlvbnMvdXNlci9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDSDtBQUV4QyxNQUFNRSxVQUFVQyx1QkFBK0IsSUFBSSxDQUF1QjtBQWdDMUUsdURBQXVEO0FBQ3ZELFNBQVNHLHFCQUFxQkMsV0FBK0I7SUFDM0QscURBQXFEO0lBQ3JELE1BQU1DLFdBQVcsSUFBSUMsS0FBS0YsWUFBWUcsbUJBQW1CO0lBQ3pELE1BQU1DLE9BQU9ILFNBQVNJLFdBQVcsR0FBR0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2pELE1BQU1DLE9BQU9OLFNBQVNPLGtCQUFrQixDQUFDLFNBQVM7UUFBRUMsTUFBTTtRQUFXQyxRQUFRO0lBQVU7SUFFdkYsT0FBTztRQUNMQyxJQUFJWCxZQUFZVyxFQUFFO1FBQ2xCUCxNQUFNQTtRQUNORyxNQUFNQTtRQUNOSyxRQUFRWixZQUFZYSxjQUFjO1FBQ2xDQyxRQUFRO1FBQ1JDLGlCQUFpQmYsWUFBWWUsZUFBZTtRQUM1Q0MsUUFBUWhCLFlBQVlnQixNQUFNLElBQUk7UUFDOUJDLGVBQWVqQixZQUFZaUIsYUFBYTtRQUN4Q0MsZUFBZWxCLFlBQVlrQixhQUFhO1FBQ3hDQyxjQUFjbkIsWUFBWW1CLFlBQVk7UUFDdENDLFdBQVdwQixZQUFZcUIsVUFBVTtRQUNqQ0MsV0FBV3RCLFlBQVl1QixVQUFVO0lBQ25DO0FBQ0Y7QUFFTyxlQUFlQyxJQUFJQyxPQUFnQjtJQUN4QyxJQUFJO1FBQ0YsOEJBQThCO1FBQzlCLE1BQU1DLGFBQWFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBQ3ZDLE1BQU1DLFFBQVFILFlBQVlwQixNQUFNLElBQUksQ0FBQyxFQUFFO1FBRXZDd0IsUUFBUUMsR0FBRyxDQUFDLDRDQUE0Q0wsYUFBYSxZQUFZO1FBQ2pGSSxRQUFRQyxHQUFHLENBQUMsNkJBQTZCRixRQUFRLEdBQUdBLE1BQU1HLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxD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QlAsUUFBUU8sS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBTzVDLHFEQUFZQSxDQUFDd0MsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1lBQW1ERyxPQUFPQSxNQUFNSCxPQUFPO1FBQUMsR0FDbkY7WUFBRXBCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcXVlbnRpbmhvL1Byb2pldHMvUGVyc28vVGlraS1SZXN0by9zcmMvYXBwL2FwaS9yZXNlcnZhdGlvbnMvdXNlci9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyB2ZXJpZnlBdXRoIH0gZnJvbSAnQC9saWIvYXV0aCc7XG5cbmNvbnN0IEFQSV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDEnO1xuXG4vLyBJbnRlcmZhY2UgcG91ciBsZXMgcsOpc2VydmF0aW9ucyBkdSBiYWNrZW5kXG5pbnRlcmZhY2UgQmFja2VuZFJlc2VydmF0aW9uIHtcbiAgaWQ6IG51bWJlcjtcbiAgY3VzdG9tZXJOYW1lOiBzdHJpbmc7XG4gIGN1c3RvbWVyRW1haWw6IHN0cmluZztcbiAgY3VzdG9tZXJQaG9uZTogc3RyaW5nO1xuICBudW1iZXJPZkd1ZXN0czogbnVtYmVyO1xuICByZXNlcnZhdGlvbkRhdGVUaW1lOiBzdHJpbmc7XG4gIHNwZWNpYWxSZXF1ZXN0cz86IHN0cmluZztcbiAgdXNlcklkPzogbnVtYmVyO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nO1xufVxuXG4vLyBJbnRlcmZhY2UgcG91ciBsZXMgcsOpc2VydmF0aW9ucyBkdSBmcm9udGVuZFxuaW50ZXJmYWNlIEZyb250ZW5kUmVzZXJ2YXRpb24ge1xuICBpZDogbnVtYmVyO1xuICBkYXRlOiBzdHJpbmc7XG4gIHRpbWU6IHN0cmluZztcbiAgZ3Vlc3RzOiBudW1iZXI7XG4gIHN0YXR1czogc3RyaW5nO1xuICBzcGVjaWFsUmVxdWVzdHM/OiBzdHJpbmc7XG4gIHVzZXJJZDogbnVtYmVyO1xuICBjdXN0b21lckVtYWlsPzogc3RyaW5nO1xuICBjdXN0b21lclBob25lPzogc3RyaW5nO1xuICBjdXN0b21lck5hbWU/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdD86IHN0cmluZztcbiAgdXBkYXRlZEF0Pzogc3RyaW5nO1xufVxuXG4vLyBGb25jdGlvbiBwb3VyIHRyYW5zZm9ybWVyIGxlcyBkb25uw6llcyBkZSByw6lzZXJ2YXRpb25cbmZ1bmN0aW9uIHRyYW5zZm9ybVJlc2VydmF0aW9uKHJlc2VydmF0aW9uOiBCYWNrZW5kUmVzZXJ2YXRpb24pOiBGcm9udGVuZFJlc2VydmF0aW9uIHtcbiAgLy8gRXh0cmFpcmUgbGEgZGF0ZSBldCBsJ2hldXJlIGRlIHJlc2VydmF0aW9uRGF0ZVRpbWVcbiAgY29uc3QgZGF0ZVRpbWUgPSBuZXcgRGF0ZShyZXNlcnZhdGlvbi5yZXNlcnZhdGlvbkRhdGVUaW1lKTtcbiAgY29uc3QgZGF0ZSA9IGRhdGVUaW1lLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgY29uc3QgdGltZSA9IGRhdGVUaW1lLnRvTG9jYWxlVGltZVN0cmluZygnZnItRlInLCB7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBpZDogcmVzZXJ2YXRpb24uaWQsXG4gICAgZGF0ZTogZGF0ZSxcbiAgICB0aW1lOiB0aW1lLFxuICAgIGd1ZXN0czogcmVzZXJ2YXRpb24ubnVtYmVyT2ZHdWVzdHMsXG4gICAgc3RhdHVzOiAnY29uZmlybWVkJywgLy8gVmFsZXVyIHBhciBkw6lmYXV0XG4gICAgc3BlY2lhbFJlcXVlc3RzOiByZXNlcnZhdGlvbi5zcGVjaWFsUmVxdWVzdHMsXG4gICAgdXNlcklkOiByZXNlcnZhdGlvbi51c2VySWQgfHwgMCxcbiAgICBjdXN0b21lckVtYWlsOiByZXNlcnZhdGlvbi5jdXN0b21lckVtYWlsLFxuICAgIGN1c3RvbWVyUGhvbmU6IHJlc2VydmF0aW9uLmN1c3RvbWVyUGhvbmUsXG4gICAgY3VzdG9tZXJOYW1lOiByZXNlcnZhdGlvbi5jdXN0b21lck5hbWUsXG4gICAgY3JlYXRlZEF0OiByZXNlcnZhdGlvbi5jcmVhdGVkX2F0LFxuICAgIHVwZGF0ZWRBdDogcmVzZXJ2YXRpb24udXBkYXRlZF9hdFxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBWw6lyaWZpZXIgbCdhdXRoZW50aWZpY2F0aW9uXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKTtcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXI/LnNwbGl0KCcgJylbMV07XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0FQSSByb3V0ZTogRW4tdMOqdGUgZFxcJ2F1dG9yaXNhdGlvbiByZcOndTonLCBhdXRoSGVhZGVyID8gJ1Byw6lzZW50JyA6ICdBYnNlbnQnKTtcbiAgICBjb25zb2xlLmxvZygnQVBJIHJvdXRlOiBUb2tlbiBleHRyYWl0OicsIHRva2VuID8gYCR7dG9rZW4uc3Vic3RyaW5nKDAsIDE1KX0uLi5gIDogJ0Fic2VudCcpO1xuICAgIFxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IFRva2VuIGRcXCdhdXRoZW50aWZpY2F0aW9uIG1hbnF1YW50Jyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogJ1Rva2VuIGRcXCdhdXRoZW50aWZpY2F0aW9uIG1hbnF1YW50JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVsOpcmlmaWVyIGV0IGTDqWNvZGVyIGxlIHRva2VuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBhd2FpdCB2ZXJpZnlBdXRoKHRva2VuKTtcbiAgICAgIGlmICghZGVjb2RlZCB8fCAhZGVjb2RlZC5zdWIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJIHJvdXRlOiBUb2tlbiBpbnZhbGlkZSBvdSBleHBpcsOpJyk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IG1lc3NhZ2U6ICdUb2tlbiBpbnZhbGlkZSBvdSBleHBpcsOpJyB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgQVBJIHJvdXRlOiBUb2tlbiBkw6ljb2TDqSBhdmVjIHN1Y2PDqHMgLSBVc2VyIElEOiAke2RlY29kZWQuc3VifSwgRW1haWw6ICR7ZGVjb2RlZC5lbWFpbH0sIFJvbGU6ICR7ZGVjb2RlZC5yb2xlfWApO1xuXG4gICAgICAvLyBUcmFuc21ldHRyZSBsYSByZXF1w6p0ZSBhdSBiYWNrZW5kXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhgQVBJIHJvdXRlOiBUZW50YXRpdmUgZCdhcHBlbCB2ZXJzICR7QVBJX1VSTH0vcmVzZXJ2YXRpb25zL3VzZXIgYXZlYyBsZSB0b2tlbmApO1xuICAgICAgICBcbiAgICAgICAgbGV0IGJhY2tlbmRSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L3Jlc2VydmF0aW9ucy91c2VyYCwge1xuICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0FQSSByb3V0ZTogUsOpcG9uc2UgZHUgYmFja2VuZCBwb3VyIC9yZXNlcnZhdGlvbnMvdXNlcjonLCBiYWNrZW5kUmVzcG9uc2Uuc3RhdHVzKTtcblxuICAgICAgICAvLyBTaSBsYSBub3V2ZWxsZSByb3V0ZSDDqWNob3VlLCBlc3NheWVyIGwnYW5jaWVubmUgcm91dGUgYXZlYyBsJ0lEXG4gICAgICAgIGlmIChiYWNrZW5kUmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQVBJIHJvdXRlOiBGYWxsYmFjayB2ZXJzIC9yZXNlcnZhdGlvbnMvdXNlci8ke2RlY29kZWQuc3VifWApO1xuICAgICAgICAgIFxuICAgICAgICAgIGJhY2tlbmRSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9VUkx9L3Jlc2VydmF0aW9ucy91c2VyLyR7ZGVjb2RlZC5zdWJ9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YCxcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coJ0FQSSByb3V0ZTogUsOpcG9uc2UgZHUgYmFja2VuZCBwb3VyIC9yZXNlcnZhdGlvbnMvdXNlci86aWQ6JywgYmFja2VuZFJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJhY2tlbmRSZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnN0IGVycm9yQm9keSA9IGF3YWl0IGJhY2tlbmRSZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gZXJyb3JCb2R5ID8gSlNPTi5wYXJzZShlcnJvckJvZHkpIDoge307XG4gICAgICAgICAgY29uc29sZS5lcnJvcignQVBJIHJvdXRlOiBFcnJldXIgZHUgYmFja2VuZDonLCBiYWNrZW5kUmVzcG9uc2Uuc3RhdHVzLCBlcnJvckRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSByb3V0ZTogQ29ycHMgZGUgbGEgcsOpcG9uc2UgZFxcJ2VycmV1cjonLCBlcnJvckJvZHkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNpIG9uIG5lIHBldXQgcGFzIGFjY8OpZGVyIGF1IGJhY2tlbmQgZXQgcXUnb24gZXN0IGVuIG1vZGUgZMOpdmVsb3BwZW1lbnQsIHJldG91cm5lciBkZXMgZG9ubsOpZXMgZGUgdGVzdFxuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0FQSSByb3V0ZTogUmV0b3VyIGRlIGRvbm7DqWVzIGRlIHRlc3QgZW4gbW9kZSBkw6l2ZWxvcHBlbWVudCcpO1xuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFt7XG4gICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgICAgICAgdGltZTogJzE5OjMwJyxcbiAgICAgICAgICAgICAgZ3Vlc3RzOiAyLFxuICAgICAgICAgICAgICBzdGF0dXM6ICdjb25maXJtZWQnLFxuICAgICAgICAgICAgICBzcGVjaWFsUmVxdWVzdHM6ICdGZW7DqnRyZSBzaSBwb3NzaWJsZScsXG4gICAgICAgICAgICAgIHVzZXJJZDogZGVjb2RlZC5zdWIsXG4gICAgICAgICAgICAgIGN1c3RvbWVyRW1haWw6IGRlY29kZWQuZW1haWwsXG4gICAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogJ1V0aWxpc2F0ZXVyIFRlc3QnXG4gICAgICAgICAgICB9XSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgbWVzc2FnZTogZXJyb3JEYXRhLm1lc3NhZ2UgfHwgYEVycmV1ciAke2JhY2tlbmRSZXNwb25zZS5zdGF0dXN9IGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHLDqXNlcnZhdGlvbnNgIH0sXG4gICAgICAgICAgICB7IHN0YXR1czogYmFja2VuZFJlc3BvbnNlLnN0YXR1cyB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhY2tlbmRSZXNlcnZhdGlvbnMgPSBhd2FpdCBiYWNrZW5kUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmxvZyhgQVBJIHJvdXRlOiAke2JhY2tlbmRSZXNlcnZhdGlvbnMubGVuZ3RofSByw6lzZXJ2YXRpb25zIHRyb3V2w6llc2ApO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJhbnNmb3JtZXIgbGVzIHLDqXNlcnZhdGlvbnMgYXUgZm9ybWF0IGF0dGVuZHUgcGFyIGxlIGZyb250ZW5kXG4gICAgICAgIGNvbnN0IGZyb250ZW5kUmVzZXJ2YXRpb25zID0gQXJyYXkuaXNBcnJheShiYWNrZW5kUmVzZXJ2YXRpb25zKSBcbiAgICAgICAgICA/IGJhY2tlbmRSZXNlcnZhdGlvbnMubWFwKHRyYW5zZm9ybVJlc2VydmF0aW9uKVxuICAgICAgICAgIDogW107XG4gICAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IFLDqXNlcnZhdGlvbnMgdHJhbnNmb3Jtw6llcyBwb3VyIGxlIGZyb250ZW5kOicsIGZyb250ZW5kUmVzZXJ2YXRpb25zKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihmcm9udGVuZFJlc2VydmF0aW9ucyk7XG4gICAgICB9IGNhdGNoIChmZXRjaEVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQVBJIHJvdXRlOiBFcnJldXIgZGUgY29tbXVuaWNhdGlvbiBhdmVjIGxlIGJhY2tlbmQ6JywgZmV0Y2hFcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBFbiBtb2RlIGTDqXZlbG9wcGVtZW50LCByZXRvdXJuZXIgZGVzIGRvbm7DqWVzIGRlIHRlc3QgZW4gY2FzIGQnZXJyZXVyXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBUEkgcm91dGU6IEVycmV1ciBiYWNrZW5kLCByZXRvdXIgZGUgZG9ubsOpZXMgZGUgdGVzdCcpO1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihbe1xuICAgICAgICAgICAgaWQ6IDk5OSxcbiAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgICAgICAgdGltZTogJzIwOjAwJyxcbiAgICAgICAgICAgIGd1ZXN0czogNCxcbiAgICAgICAgICAgIHN0YXR1czogJ2NvbmZpcm1lZCcsXG4gICAgICAgICAgICBzcGVjaWFsUmVxdWVzdHM6ICdUYWJsZSBhdSBjYWxtZScsXG4gICAgICAgICAgICB1c2VySWQ6IGRlY29kZWQuc3ViLFxuICAgICAgICAgICAgY3VzdG9tZXJFbWFpbDogZGVjb2RlZC5lbWFpbCxcbiAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogJ1V0aWxpc2F0ZXVyIFRlc3QgKE1vZGUgU2Vjb3VycyknXG4gICAgICAgICAgfV0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBtZXNzYWdlOiBgSW1wb3NzaWJsZSBkZSBjb21tdW5pcXVlciBhdmVjIGxlIHNlcnZldXIgZGUgcsOpc2VydmF0aW9uOiAke2ZldGNoRXJyb3IubWVzc2FnZX1gIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDUwMyB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAodG9rZW5FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQVBJIHJvdXRlOiBFcnJldXIgbG9ycyBkZSBsYSB2w6lyaWZpY2F0aW9uIGR1IHRva2VuOicsIHRva2VuRXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6ICdFcnJldXIgZGUgdsOpcmlmaWNhdGlvbiBkdSB0b2tlbicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSByb3V0ZTogRXJyZXVyIGluYXR0ZW5kdWU6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogJ0VycmV1ciBsb3JzIGRlIGxhIHLDqWN1cMOpcmF0aW9uIGRlcyByw6lzZXJ2YXRpb25zJywgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInZlcmlmeUF1dGgiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJ0cmFuc2Zvcm1SZXNlcnZhdGlvbiIsInJlc2VydmF0aW9uIiwiZGF0ZVRpbWUiLCJEYXRlIiwicmVzZXJ2YXRpb25EYXRlVGltZSIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwidGltZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJpZCIsImd1ZXN0cyIsIm51bWJlck9mR3Vlc3RzIiwic3RhdHVzIiwic3BlY2lhbFJlcXVlc3RzIiwidXNlcklkIiwiY3VzdG9tZXJFbWFpbCIsImN1c3RvbWVyUGhvbmUiLCJjdXN0b21lck5hbWUiLCJjcmVhdGVkQXQiLCJjcmVhdGVkX2F0IiwidXBkYXRlZEF0IiwidXBkYXRlZF9hdCIsIkdFVCIsInJlcXVlc3QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInRva2VuIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsImpzb24iLCJtZXNzYWdlIiwiZGVjb2RlZCIsInN1YiIsImVycm9yIiwiZW1haWwiLCJyb2xlIiwiYmFja2VuZFJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJvayIsImVycm9yQm9keSIsInRleHQiLCJlcnJvckRhdGEiLCJKU09OIiwicGFyc2UiLCJiYWNrZW5kUmVzZXJ2YXRpb25zIiwibGVuZ3RoIiwiZnJvbnRlbmRSZXNlcnZhdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJmZXRjaEVycm9yIiwidG9rZW5FcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/reservations/user/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nasync function verifyAuth(token) {\n    try {\n        // La clé secrète doit correspondre à celle utilisée dans le backend\n        const secret = process.env.JWT_SECRET || 'tiki-secret-key-2023';\n        // Vérification synchrone du token\n        const decoded = (0,jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__.verify)(token, secret);\n        // Vérifier si le token a expiré\n        const now = Math.floor(Date.now() / 1000);\n        if (decoded.exp < now) {\n            console.error('Token expiré:', new Date(decoded.exp * 1000).toLocaleString(), 'vs maintenant:', new Date().toLocaleString());\n            return null;\n        }\n        return decoded;\n    } catch (error) {\n        if (error.name === 'TokenExpiredError') {\n            console.error('Token expiré:', error.expiredAt);\n        } else if (error.name === 'JsonWebTokenError') {\n            console.error('Token invalide:', error.message);\n        } else {\n            console.error('Erreur lors de la vérification du token:', error);\n        }\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNDO0FBVS9CLGVBQWVDLFdBQVdDLEtBQWE7SUFDNUMsSUFBSTtRQUNGLG9FQUFvRTtRQUNwRSxNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLFVBQVUsSUFBSTtRQUV6QyxrQ0FBa0M7UUFDbEMsTUFBTUMsVUFBVVAsb0RBQU1BLENBQUNFLE9BQU9DO1FBRTlCLGdDQUFnQztRQUNoQyxNQUFNSyxNQUFNQyxLQUFLQyxLQUFLLENBQUNDLEtBQUtILEdBQUcsS0FBSztRQUNwQyxJQUFJRCxRQUFRSyxHQUFHLEdBQUdKLEtBQUs7WUFDckJLLFFBQVFDLEtBQUssQ0FBQyxpQkFBaUIsSUFBSUgsS0FBS0osUUFBUUssR0FBRyxHQUFHLE1BQU1HLGNBQWMsSUFBSSxrQkFBa0IsSUFBSUosT0FBT0ksY0FBYztZQUN6SCxPQUFPO1FBQ1Q7UUFFQSxPQUFPUjtJQUNULEVBQUUsT0FBT08sT0FBWTtRQUNuQixJQUFJQSxNQUFNRSxJQUFJLEtBQUsscUJBQXFCO1lBQ3RDSCxRQUFRQyxLQUFLLENBQUMsaUJBQWlCQSxNQUFNRyxTQUFTO1FBQ2hELE9BQU8sSUFBSUgsTUFBTUUsSUFBSSxLQUFLLHFCQUFxQjtZQUM3Q0gsUUFBUUMsS0FBSyxDQUFDLG1CQUFtQkEsTUFBTUksT0FBTztRQUNoRCxPQUFPO1lBQ0xMLFFBQVFDLEtBQUssQ0FBQyw0Q0FBNENBO1FBQzVEO1FBQ0EsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9xdWVudGluaG8vUHJvamV0cy9QZXJzby9UaWtpLVJlc3RvL3NyYy9saWIvYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZXJpZnkgfSBmcm9tICdqc29ud2VidG9rZW4nO1xuXG5pbnRlcmZhY2UgRGVjb2RlZFRva2VuIHtcbiAgc3ViOiBudW1iZXI7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHJvbGU6IHN0cmluZztcbiAgaWF0OiBudW1iZXI7XG4gIGV4cDogbnVtYmVyO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXV0aCh0b2tlbjogc3RyaW5nKTogUHJvbWlzZTxEZWNvZGVkVG9rZW4gfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgLy8gTGEgY2zDqSBzZWNyw6h0ZSBkb2l0IGNvcnJlc3BvbmRyZSDDoCBjZWxsZSB1dGlsaXPDqWUgZGFucyBsZSBiYWNrZW5kXG4gICAgY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAndGlraS1zZWNyZXQta2V5LTIwMjMnO1xuICAgIFxuICAgIC8vIFbDqXJpZmljYXRpb24gc3luY2hyb25lIGR1IHRva2VuXG4gICAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeSh0b2tlbiwgc2VjcmV0KSBhcyBEZWNvZGVkVG9rZW47XG4gICAgXG4gICAgLy8gVsOpcmlmaWVyIHNpIGxlIHRva2VuIGEgZXhwaXLDqVxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICAgIGlmIChkZWNvZGVkLmV4cCA8IG5vdykge1xuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gZXhwaXLDqTonLCBuZXcgRGF0ZShkZWNvZGVkLmV4cCAqIDEwMDApLnRvTG9jYWxlU3RyaW5nKCksICd2cyBtYWludGVuYW50OicsIG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGRlY29kZWQ7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1Rva2VuRXhwaXJlZEVycm9yJykge1xuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gZXhwaXLDqTonLCBlcnJvci5leHBpcmVkQXQpO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykge1xuICAgICAgY29uc29sZS5lcnJvcignVG9rZW4gaW52YWxpZGU6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIHbDqXJpZmljYXRpb24gZHUgdG9rZW46JywgZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufSAiXSwibmFtZXMiOlsidmVyaWZ5IiwidmVyaWZ5QXV0aCIsInRva2VuIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJkZWNvZGVkIiwibm93IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsImV4cCIsImNvbnNvbGUiLCJlcnJvciIsInRvTG9jYWxlU3RyaW5nIiwibmFtZSIsImV4cGlyZWRBdCIsIm1lc3NhZ2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Freservations%2Fuser%2Froute&page=%2Fapi%2Freservations%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freservations%2Fuser%2Froute.ts&appDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fquentinho%2FProjets%2FPerso%2FTiki-Resto&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();