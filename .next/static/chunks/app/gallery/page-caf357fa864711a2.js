(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6235],{88200:(e,t,s)=>{Promise.resolve().then(s.bind(s,36852))},93518:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},46967:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},42233:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},24035:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},36852:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(95155),r=s(12115),l=s(5565),i=s(17146),o=s(42649),n=s(55037),c=s(33473);function d(e){let{isAdmin:t,onAddImage:s,isAddingImage:r,isEditing:l}=e;return(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"font-didot text-5xl sm:text-3xl md:text-4xl lg:text-6xl font-bold mb-2 md:mb-4",children:"Galerie Photos"}),(0,a.jsx)("div",{className:"w-24 h-1 bg-[#C4B5A2] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Plongez dans l'ambiance unique de notre restaurant"}),t&&!r&&!l&&(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsxs)("button",{onClick:s,className:"flex items-center gap-2 bg-[#C4B5A2] text-black px-4 py-2 rounded-md hover:bg-[#a39482]",children:[(0,a.jsx)(c.A,{size:20}),"Ajouter une photo"]})})]})}function m(e){let{categories:t,activeCategory:s,onCategoryChange:r}=e;return(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-3 mb-8 sm:mb-12 px-1",children:t.map(e=>(0,a.jsx)("button",{onClick:()=>r(e.id),className:"px-3 sm:px-6 py-2 rounded-full border-2 text-sm sm:text-base transition-colors ".concat(s===e.id?"border-[#C4B5A2] bg-[#C4B5A2] text-black":"border-[#C4B5A2]/30 hover:border-[#C4B5A2] text-gray-300"),children:e.name},e.id))})}var x=s(60872),u=s(45686);let h=e=>e?e.startsWith("http")?e:e.startsWith("/uploads/")?"".concat("https://api.votredomaine.com").concat(e):"".concat("https://api.votredomaine.com","/uploads").concat(e):"/images/default.jpg";function g(e){let{image:t,isAdmin:s,onImageClick:r,onEdit:i,onDelete:o}=e;return(0,a.jsxs)("div",{className:"group relative cursor-pointer overflow-hidden rounded-xl border border-[#C4B5A2]/20 shadow-xl bg-[#2a2a2a]/90 backdrop-blur-md",onClick:()=>r(t),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity z-10"}),(0,a.jsx)("div",{className:"relative h-64",children:(0,a.jsx)(l.default,{src:h(t.imagePath),alt:t.title,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:t.title}),(0,a.jsx)("p",{className:"text-sm text-gray-300 line-clamp-2",children:t.description}),s&&(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),i(t)},className:"flex items-center gap-1 bg-blue-600 px-2 py-1 rounded text-xs sm:text-sm hover:bg-blue-700",children:[(0,a.jsx)(x.A,{size:14,className:"hidden sm:block"}),"Modifier"]}),(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),o(t.id)},className:"flex items-center gap-1 bg-red-600 px-2 py-1 rounded text-xs sm:text-sm hover:bg-red-700",children:[(0,a.jsx)(u.A,{size:14,className:"hidden sm:block"}),"Supprimer"]})]})]})]})}function p(e){let{images:t,isAdmin:s,onImageClick:r,onEdit:l,onDelete:i}=e;return 0===t.length?(0,a.jsx)("div",{className:"text-center p-8 bg-[#2a2a2a]/50 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Aucune image trouv\xe9e pour cette cat\xe9gorie"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:t.map(e=>(0,a.jsx)(g,{image:e,isAdmin:s,onImageClick:r,onEdit:l,onDelete:i},e.id))})}var b=s(40767),j=s(93518),v=s(42233),f=s(24035),N=s(46967);function y(e){var t;let{image:s,isAdmin:r,isPlaying:i,onClose:o,onPrevious:n,onNext:c,onPlayToggle:d,onEdit:m,onDelete:h}=e;return(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md z-50 flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0",children:[(0,a.jsx)("button",{onClick:d,className:"px-3 py-1 sm:px-4 sm:py-2 rounded-lg bg-[#C4B5A2] text-white hover:bg-[#A69783] transition-colors text-sm",children:i?"Pause":"Lecture auto"}),(0,a.jsx)("button",{onClick:o,className:"text-white hover:text-[#C4B5A2] transition-colors mx-auto sm:mx-0",children:(0,a.jsx)(b.A,{className:"w-6 h-6 sm:w-8 sm:h-8"})})]}),(0,a.jsx)("button",{onClick:n,className:"absolute left-2 sm:left-4 text-white hover:text-[#C4B5A2] transition-colors",children:(0,a.jsx)(j.A,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),(0,a.jsxs)("div",{className:"h-screen w-screen flex flex-col items-center justify-center px-8 sm:px-16",children:[(0,a.jsx)("div",{className:"w-full h-[60vh] sm:h-[80vh] relative",children:(0,a.jsx)(l.default,{src:(null===(t=s.imagePath)||void 0===t?void 0:t.startsWith("http"))?s.imagePath:"".concat("https://api.votredomaine.com").concat(s.imagePath)||0,alt:s.title,fill:!0,className:"object-contain"})}),(0,a.jsxs)("div",{className:"w-full text-center mt-4",children:[(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:s.title}),(0,a.jsx)("p",{className:"text-gray-300 mb-4 text-sm sm:text-base px-4",children:s.description}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 sm:space-x-4",children:[r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{o(),m(s)},className:"flex items-center gap-1 bg-blue-600 px-3 py-1 sm:px-4 sm:py-2 rounded text-sm hover:bg-blue-700",children:[(0,a.jsx)(x.A,{size:16,className:"hidden sm:block"}),"Modifier"]}),(0,a.jsxs)("button",{onClick:()=>{o(),h(s.id)},className:"flex items-center gap-1 bg-red-600 px-3 py-1 sm:px-4 sm:py-2 rounded text-sm hover:bg-red-700",children:[(0,a.jsx)(u.A,{size:16,className:"hidden sm:block"}),"Supprimer"]})]}),(0,a.jsxs)("button",{className:"flex items-center gap-1 text-[#C4B5A2] hover:text-white transition-colors",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Facebook"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-1 text-[#C4B5A2] hover:text-white transition-colors",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Instagram"})]})]})]})]}),(0,a.jsx)("button",{onClick:c,className:"absolute right-2 sm:right-4 text-white hover:text-[#C4B5A2] transition-colors",children:(0,a.jsx)(N.A,{className:"w-6 h-6 sm:w-8 sm:h-8"})})]})}var w=s(98867);function A(e){let{isEditing:t,newImage:s,categories:r,onClose:l,onSubmit:i,onChange:o,onImageUpload:c,isUploading:d}=e;return(0,a.jsxs)("div",{className:"bg-[#2a2a2a]/90 backdrop-blur-md rounded-xl p-4 sm:p-8 border-2 border-[#C4B5A2] mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-[#C4B5A2]",children:t?"Modifier une image":"Ajouter une image"}),(0,a.jsx)("button",{onClick:l,className:"text-white hover:text-[#C4B5A2]",children:(0,a.jsx)(b.A,{size:24})})]}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-[#1a1a1a] rounded text-white border border-[#C4B5A2]/30",placeholder:"Titre de l'image",value:s.title||"",onChange:e=>o("title",e.target.value)}),(0,a.jsx)("textarea",{className:"w-full mb-4 p-2 bg-[#1a1a1a] rounded text-white border border-[#C4B5A2]/30",placeholder:"Description",value:s.description||"",onChange:e=>o("description",e.target.value)}),(0,a.jsx)("select",{className:"w-full mb-4 p-2 bg-[#1a1a1a] rounded text-white border border-[#C4B5A2]/30",value:s.category||"restaurant",onChange:e=>o("category",e.target.value),children:r.filter(e=>"all"!==e.id).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Image"}),(0,a.jsxs)("div",{className:"mt-2 relative border-2 border-dashed border-gray-600 rounded p-4",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:async e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0],s=await c(t);s&&(o("imagePath",s),n.oR.success("Image t\xe9l\xe9charg\xe9e avec succ\xe8s"))}}}),(0,a.jsx)("div",{className:"text-center text-gray-400",children:d?(0,a.jsx)("p",{children:"Upload en cours..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"D\xe9posez votre image ici ou cliquez pour s\xe9lectionner"}),s.imagePath&&(0,a.jsxs)("p",{className:"text-green-500 mt-2",children:["Image s\xe9lectionn\xe9e: ",s.imagePath.split("/").pop()]})]})})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:i,className:"flex items-center gap-2 bg-green-600 px-4 py-2 rounded hover:bg-green-700",disabled:d,children:[(0,a.jsx)(w.A,{size:20}),t?"Mettre \xe0 jour":"Ajouter"]}),(0,a.jsxs)("button",{onClick:l,className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",disabled:d,children:[(0,a.jsx)(b.A,{size:20}),"Annuler"]})]})]})}function C(){let{user:e,token:t}=(0,i.h)(),[s,c]=(0,r.useState)("all"),[x,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1),[v,f]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),[C,k]=(0,r.useState)(!0),[E,P]=(0,r.useState)(null),[B,I]=(0,r.useState)(!1),[z]=(0,r.useState)([{id:"all",name:"Tout"},{id:"restaurant",name:"Restaurant"},{id:"dishes",name:"Plats"},{id:"events",name:"\xc9v\xe9nements"}]),[S,R]=(0,r.useState)([]),[D,F]=(0,r.useState)({title:"",description:"",category:"restaurant",imagePath:"",isActive:!0});(0,r.useEffect)(()=>{(async()=>{try{k(!0);let e="all"===s?await o.jE.getAll():await o.jE.getByCategory(s);R(e),P(null)}catch(e){console.error("Erreur lors du chargement des images:",e),P("Une erreur est survenue lors du chargement des images"),R([])}finally{k(!1)}})()},[s]),(0,r.useEffect)(()=>{let e;return h&&x&&(e=setInterval(_,3e3)),()=>clearInterval(e)},[h,x]);let M="all"===s?S:S.filter(e=>e.category===s),_=()=>{if(!x||0===M.length)return;let e=M.findIndex(e=>e.id===x.id);u(M[(e+1)%M.length])},q=async e=>{if(!e)return null;I(!0);try{let s=new FormData;s.append("file",e);let a=await fetch("".concat("https://api.votredomaine.com","/uploads/image"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:s});if(!a.ok)throw Error("Erreur lors de l'upload de l'image");let r=await a.json();return I(!1),r.imagePath}catch(e){return console.error("Failed to upload image:",e),n.oR.error("Erreur lors de l'upload de l'image"),I(!1),null}},L=async()=>{try{if(!D.title||!D.imagePath){n.oR.error("Le titre et l'image sont requis");return}let e=await o.jE.create(D);R([...S,e]),w(!1),n.oR.success("Image ajout\xe9e avec succ\xe8s"),F({title:"",description:"",category:"restaurant",imagePath:"",isActive:!0})}catch(e){console.error("Erreur lors de l'ajout:",e),n.oR.error("Erreur lors de l'ajout de l'image")}},T=async()=>{try{if(!v)return;if(!D.title||!D.imagePath){n.oR.error("Le titre et l'image sont requis");return}let e=await o.jE.update(v.id,D);R(S.map(t=>t.id===v.id?e:t)),j(!1),f(null),n.oR.success("Image mise \xe0 jour avec succ\xe8s")}catch(e){console.error("Erreur lors de la mise \xe0 jour:",e),n.oR.error("Erreur lors de la mise \xe0 jour de l'image")}},U=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cette image ?"))try{await o.jE.delete(e),R(S.filter(t=>t.id!==e)),(null==x?void 0:x.id)===e&&u(null),n.oR.success("Image supprim\xe9e avec succ\xe8s")}catch(e){console.error("Erreur lors de la suppression:",e),n.oR.error("Erreur lors de la suppression de l'image")}};return C?(0,a.jsx)("div",{className:"flex flex-col min-h-screen bg-[#141414] text-white items-center justify-center",children:(0,a.jsxs)("div",{className:"p-8 bg-[#2a2a2a]/80 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Chargement..."}),(0,a.jsx)("p",{children:"Nous r\xe9cup\xe9rons les images de la galerie"})]})}):(0,a.jsx)("div",{className:"flex flex-col min-h-screen bg-[#141414] text-white",children:(0,a.jsxs)("main",{className:"flex-grow relative w-full",children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,a.jsxs)("div",{className:"w-[150px] sm:w-[250px] md:w-[400px] relative",children:[(0,a.jsx)(l.default,{src:"/decorations/leavesleft.webp",alt:"D\xe9coration gauche",fill:!0,className:"object-cover opacity-20",priority:!0}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 w-12 sm:w-20 md:w-32 bg-gradient-to-r from-transparent to-[#141414]"})]}),(0,a.jsx)("div",{className:"flex-grow bg-[#141414]",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"})}),(0,a.jsxs)("div",{className:"w-[150px] sm:w-[250px] md:w-[400px] relative",children:[(0,a.jsx)(l.default,{src:"/decorations/leavesright.webp",alt:"D\xe9coration droite",fill:!0,className:"object-cover opacity-20",priority:!0}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 w-12 sm:w-20 md:w-32 bg-gradient-to-l from-transparent to-[#141414]"})]})]}),(0,a.jsxs)("div",{className:"relative max-w-6xl mt-40 mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 md:py-16",children:[(0,a.jsx)(d,{isAdmin:(null==e?void 0:e.role)==="admin",onAddImage:()=>w(!0),isAddingImage:N,isEditing:b}),(N||b)&&(0,a.jsx)(A,{isEditing:b,newImage:D,categories:z,onClose:()=>{w(!1),j(!1),f(null)},onSubmit:b?T:L,onChange:(e,t)=>F({...D,[e]:t}),onImageUpload:q,isUploading:B}),E&&(0,a.jsx)("div",{className:"bg-red-900/30 border border-red-700 text-red-200 p-4 rounded-lg mb-8",children:(0,a.jsx)("p",{children:E})}),(0,a.jsx)(m,{categories:z,activeCategory:s,onCategoryChange:c}),(0,a.jsx)(p,{images:M,isAdmin:(null==e?void 0:e.role)==="admin",onImageClick:u,onEdit:e=>{f(e),F(e),j(!0),u(null)},onDelete:U}),x&&(0,a.jsx)(y,{image:x,isAdmin:(null==e?void 0:e.role)==="admin",isPlaying:h,onClose:()=>u(null),onPrevious:()=>{if(!x||0===M.length)return;let e=M.findIndex(e=>e.id===x.id);u(M[(e-1+M.length)%M.length])},onNext:_,onPlayToggle:()=>g(!h),onEdit:e=>{u(null),f(e),F(e),j(!0)},onDelete:e=>{u(null),U(e)}})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5565,4069,2652,8441,1517,7358],()=>t(88200)),_N_E=e.O()}]);