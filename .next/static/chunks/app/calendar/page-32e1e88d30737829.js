(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5085],{11200:(e,t,r)=>{Promise.resolve().then(r.bind(r,9922))},32423:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},93518:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},46967:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},73239:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},66889:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},92823:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9922:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var a=r(95155),s=r(12115),n=r(68630),o=r(91880);function i(e,t,r){let a=(0,o.a)(e,null==r?void 0:r.in);if(isNaN(t))return(0,n.w)((null==r?void 0:r.in)||e,NaN);if(!t)return a;let s=a.getDate(),i=(0,n.w)((null==r?void 0:r.in)||e,a.getTime());return(i.setMonth(a.getMonth()+t+1,0),s>=i.getDate())?i:(a.setFullYear(i.getFullYear(),i.getMonth(),s),a)}var l=r(55037),c=r(93518),u=r(46967),d=r(55745),m=r(21233);function p(e){let{currentDate:t,onPrevMonth:r,onNextMonth:s}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("button",{onClick:r,className:"p-2 bg-[#1a1a1a] rounded-lg hover:bg-[#3a3a3a]",children:(0,a.jsx)(c.A,{className:"w-5 h-5"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:(0,d.GP)(t,"MMMM yyyy",{locale:m.fr})}),(0,a.jsx)("button",{onClick:s,className:"p-2 bg-[#1a1a1a] rounded-lg hover:bg-[#3a3a3a]",children:(0,a.jsx)(u.A,{className:"w-5 h-5"})})]})}var h=r(67401);let v=(0,h.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var g=r(66889);let x=e=>{let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(a)};function f(e){let{day:t,date:r,isSelected:s,isPast:n,reservations:o,events:i=[],seafoodOrders:l=[],onClick:c}=e,u=x(r),d=r.getDate();i.filter(e=>e.eventDate===u);let m=o.filter(e=>{let t=new Date(e.reservationDateTime);return t.getDate()===d&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}),p=l.filter(e=>{try{let t="";if("string"==typeof e.pickupDate&&e.pickupDate.match(/^\d{4}-\d{2}-\d{2}/))t=e.pickupDate.split("T")[0];else if("string"==typeof e.pickupDate&&e.pickupDate.includes("/")){let[r,a,s]=e.pickupDate.split("/").map(Number);t="".concat(s,"-").concat(String(a).padStart(2,"0"),"-").concat(String(r).padStart(2,"0"))}else{let r=new Date(e.pickupDate);isNaN(r.getTime())||(t=x(r))}return t===u}catch(t){return console.error("Erreur de format de date pour la commande ".concat(e.id,":"),t),!1}}),h=m.filter(e=>!(e.specialRequests&&(e.specialRequests.includes("\xc9V\xc9NEMENT")||e.specialRequests.includes("\xc9v\xe9nement")))),f=p.length>0,b=i.filter(e=>{if("seafood"===e.type)return!1;try{let t=null;if("string"==typeof e.eventDate){if(e.eventDate.includes("-")){let r=e.eventDate.split("-");r.length>=3&&(t=parseInt(r[2].split("T")[0]))}else{let r=new Date(e.eventDate);isNaN(r.getTime())||(t=r.getDate())}}else if(e.eventDate&&"object"==typeof e.eventDate){let r=new Date(e.eventDate);isNaN(r.getTime())||(t=r.getDate())}return t===r.getDate()}catch(e){return!1}});return(0,a.jsxs)("div",{onClick:n?void 0:c,className:"h-24 bg-[#2a2a2a] border border-[#3a3a3a] p-2 transition-colors flex flex-col justify-between\n        ".concat(s?"ring-2 ring-[#C4B5A2]":"hover:bg-[#3a3a3a]","\n        ").concat(n?"opacity-50 cursor-not-allowed":"cursor-pointer","\n        ").concat(f?"border-l-4 border-l-[#FF9370]":"","\n      "),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:t}),(0,a.jsxs)("div",{className:"flex gap-1",children:[f&&(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-[#FF9370] text-black font-bold flex items-center gap-1",title:"Commandes de fruits de mer",children:[(0,a.jsx)(v,{className:"w-3 h-3"}),p.length]}),(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-[#C4B5A2] text-black",children:[h.reduce((e,t)=>e+t.numberOfGuests,0)+b.reduce((e,t)=>{let r=t.title.match(/\((\d+) pers\.\)/);return e+(r?parseInt(r[1]):t.maxGuests)},0)," pers."]})]})]}),b.length>0&&(0,a.jsxs)("div",{className:"mt-1 space-y-1",children:[b.slice(0,2).map(e=>(0,a.jsx)("div",{className:"text-xs px-1.5 py-0.5 rounded-sm",style:{backgroundColor:e.color||"#4A6FA5",color:"#ffffff"},children:e.title},"event-".concat(e.id))),b.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",b.length-2," \xe9v\xe9nements"]})]}),0===h.length?null:(0,a.jsxs)("div",{className:"mt-1 space-y-1",children:[h.slice(0,2).map(e=>{let t=new Date(e.reservationDateTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});return(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,a.jsx)(g.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:t}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[e.numberOfGuests,"p"]})]},e.id)}),h.length>2&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["+",h.length-2," autres"]})]})]}),f&&(0,a.jsxs)("div",{className:"text-xs px-2 py-1 rounded text-black font-bold mt-auto w-full text-center",style:{backgroundColor:"#FF9370"},children:["Fruits de mer (",p.length,")"]})]})}function b(e){let{currentDate:t,selectedDate:r,reservations:s,events:i=[],seafoodOrders:l=[],onSelectDate:c}=e,u=[...i,...(e=>{let t=[],r={};return e.forEach(e=>{if(e.specialRequests&&e.specialRequests.includes("\xc9V\xc9NEMENT")){let t=e.specialRequests.match(/ÉVÉNEMENT #\d+\/\d+ \((\d+) pers\. total\)/),a=e.specialRequests.match(/Type: (special|private|public|seafood)/);if(t){t[1];let s=a?a[1]:"special",n=new Date(e.reservationDateTime),o="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0"),"-").concat(String(n.getHours()).padStart(2,"0"),":").concat(String(n.getMinutes()).padStart(2,"0")),i="".concat(e.customerName,"-").concat(o,"-").concat(s);r[i]||(r[i]=[]),r[i].push(e)}}}),Object.entries(r).forEach(e=>{let[r,a]=e;if(a.length>0){var s,n,o;let e=a[0],r=null===(s=e.specialRequests)||void 0===s?void 0:s.match(/ÉVÉNEMENT #\d+\/\d+ \((\d+) pers\. total\)/),i=null===(n=e.specialRequests)||void 0===n?void 0:n.match(/Type: (special|private|public|seafood)/),l=null===(o=e.specialRequests)||void 0===o?void 0:o.match(/- (.*)/),c=0;c=Math.max(c=r&&!isNaN(parseInt(r[1]))?parseInt(r[1]):a.reduce((e,t)=>e+t.numberOfGuests,0),1);let u=i?i[1]:"special",d=l?l[1]:"",m="",p="";switch(u){case"private":m="\xc9v\xe9nement priv\xe9 (".concat(c," pers.)"),p="#4CAF50";break;case"seafood":m="".concat(c," article").concat(c>1?"s":""),p="#FF9370";break;case"public":m="\xc9v\xe9nement public (".concat(c," pers.)"),p="#FF9800";break;default:m="\xc9v\xe9nement sp\xe9cial (".concat(c," pers.)"),p="#2196F3"}let h=new Date(e.reservationDateTime),v=h.getHours().toString().padStart(2,"0"),g=h.getMinutes().toString().padStart(2,"0");t.push({id:e.id,title:m,description:d,eventDate:"".concat(h.getFullYear(),"-").concat(String(h.getMonth()+1).padStart(2,"0"),"-").concat(String(h.getDate()).padStart(2,"0")),startTime:"".concat(v,":").concat(g),endTime:"",maxGuests:c,type:u,color:p})}}),t})(s)];return(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(e=>(0,a.jsx)("div",{className:"text-center py-2 text-[#C4B5A2] font-medium",children:e},e)),(()=>{var e;let i=(e=function(e,t){let r=(0,o.a)(e,void 0);return r.setDate(1),r.setHours(0,0,0,0),r}(t),(0,o.a)(e,void 0).getDay()||7),d=function(e,t){let r=(0,o.a)(e,void 0),a=r.getFullYear(),s=r.getMonth(),i=(0,n.w)(r,0);return i.setFullYear(a,s+1,0),i.setHours(0,0,0,0),i.getDate()}(t),m=[];for(let e=1;e<i;e++)m.push((0,a.jsx)("div",{className:"h-24 bg-[#2a2a2a]/50 border border-[#3a3a3a]"},"empty-".concat(e)));let p=new Date;p.setHours(0,0,0,0);for(let e=1;e<=d;e++){let n=new Date(t.getFullYear(),t.getMonth(),e),o=r&&n.toDateString()===r.toDateString(),i=n<p,d="".concat(n.getFullYear(),"-").concat(String(n.getMonth()+1).padStart(2,"0"),"-").concat(String(n.getDate()).padStart(2,"0")),h=u.filter(t=>{if("seafood"===t.type)try{return parseInt(t.eventDate.split("-")[2])===e}catch(e){return console.error("Erreur lors de l'extraction du jour:",e),!1}return t.eventDate===d});m.push((0,a.jsx)(f,{day:e,date:n,isSelected:o||!1,isPast:i,reservations:s,events:h,seafoodOrders:l,onClick:()=>c(n)},e))}return m})()]})}let y=(0,h.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var N=r(73239);let j=(0,h.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var k=r(17146);function S(e){var t;let{reservations:r,onEdit:n,onDelete:o,onTableUpdate:i,isDeleting:l}=e,[c,u]=(0,s.useState)(null),[d,m]=(0,s.useState)({}),[p,h]=(0,s.useState)(!1),{user:v}=(0,k.h)(),g=(null==v?void 0:null===(t=v.role)||void 0===t?void 0:t.toLowerCase())==="admin",x=e=>{u(e)},f=(e,t)=>{m({...d,[e]:t})},b=e=>{let t=d[e.id]?parseInt(d[e.id],10):e.tableNumber||0;if(i(e.id,t,!e.isArrived),d[e.id]){let t={...d};delete t[e.id],m(t)}},S=g?p?r:r.filter(e=>!e.isArrived):r;return(0,a.jsxs)("div",{className:"space-y-4 mt-6 relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:"text-lg font-medium",children:g?0===S.length?p?"Aucune r\xe9servation pour cette date":"Aucune r\xe9servation en attente":"".concat(S.length," r\xe9servation(s)"):0===r.length?"Aucune r\xe9servation pour cette date":"".concat(r.length," r\xe9servation(s)")}),g&&(0,a.jsx)("button",{onClick:()=>h(!p),className:"px-3 py-1 text-sm rounded-md transition-colors bg-[#2a2a2a] hover:bg-[#3a3a3a] text-[#C4B5A2]",children:p?"Masquer arriv\xe9es":"Afficher tout"})]}),null!==c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-lg p-6 max-w-md w-full mx-4 border border-[#C4B5A2]/30 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center text-amber-400 mb-4",children:[(0,a.jsx)(y,{className:"w-6 h-6 mr-2"}),(0,a.jsx)("h3",{className:"text-xl font-bold",children:"Confirmer la suppression"})]}),(0,a.jsx)("p",{className:"text-gray-300 mb-6",children:"\xcates-vous s\xfbr de vouloir supprimer cette r\xe9servation ? Cette action est irr\xe9versible."}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>{u(null)},className:"px-4 py-2 bg-[#3a3a3a] text-gray-300 rounded-lg hover:bg-[#4a4a4a] transition-colors",children:"Annuler"}),(0,a.jsx)("button",{onClick:()=>{null!==c&&(o(c),u(null))},disabled:l,className:"px-4 py-2 bg-red-600/80 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:l?"Suppression...":"Confirmer la suppression"})]})]})}),S.length>0&&S.sort((e,t)=>new Date(e.reservationDateTime).getTime()-new Date(t.reservationDateTime).getTime()).map(e=>(0,a.jsxs)("div",{className:"bg-[#1A1A1A] rounded-lg p-4 border ".concat(g&&e.isArrived?"border-green-500/30 bg-green-900/10":"border-[#C4B5A2]/30"," flex flex-col sm:flex-row justify-between"),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-[#C4B5A2]",children:new Date(e.reservationDateTime).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),(0,a.jsxs)("span",{className:"ml-2 px-2 py-0.5 bg-[#C4B5A2]/20 rounded-full text-xs text-[#C4B5A2]",children:[e.numberOfGuests," ",e.numberOfGuests>1?"personnes":"personne"]}),g&&e.tableNumber&&(0,a.jsxs)("span",{className:"ml-2 px-2 py-0.5 bg-blue-500/20 rounded-full text-xs text-blue-300",children:["Table n\xb0",e.tableNumber]}),g&&e.isArrived&&(0,a.jsxs)("span",{className:"ml-2 px-2 py-0.5 bg-green-500/20 rounded-full text-xs text-green-300 flex items-center",children:[(0,a.jsx)(N.A,{size:12,className:"mr-1"})," Arriv\xe9"]})]}),(0,a.jsx)("p",{className:"text-white",children:e.customerName}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:e.customerPhone}),e.specialRequests&&(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:e.specialRequests})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 mt-3 sm:mt-0",children:[g&&(0,a.jsxs)("div",{className:"flex items-center gap-2 self-end sm:self-start",children:[(0,a.jsx)("input",{type:"number",placeholder:"N\xb0 table",value:void 0!==d[e.id]?d[e.id]:e.tableNumber||"",onChange:t=>f(e.id,t.target.value),className:"w-20 px-2 py-1 text-sm bg-[#2a2a2a] border border-[#4a4a4a] rounded focus:outline-none focus:border-[#C4B5A2]",min:"1"}),(0,a.jsx)("button",{onClick:()=>b(e),className:"px-2 py-1 rounded-lg transition-colors ".concat(e.isArrived?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"),title:e.isArrived?"Marquer comme non arriv\xe9":"Marquer comme arriv\xe9",children:e.isArrived?(0,a.jsx)(j,{size:18}):(0,a.jsx)(N.A,{size:18})})]}),(0,a.jsxs)("div",{className:"flex gap-2 self-end",children:[(0,a.jsx)("button",{onClick:t=>{t.preventDefault(),console.log("Clic sur le bouton Modifier:",e),n(e)},className:"px-4 py-2 border border-blue-500/70 text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors font-medium",children:"Modifier"}),(0,a.jsx)("button",{onClick:()=>x(e.id),disabled:l||null!==c,className:"px-4 py-2 border border-red-500/70 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Supprimer"})]})]})]},e.id))]})}var w=r(28018);function D(e){let{formData:t,onChange:r,onSubmit:s,isSubmitting:n,submitMessage:o,selectedDate:i,isEditing:l}=e;return console.log("ReservationForm rendu avec:",{formData:t,selectedDate:null==i?void 0:i.toISOString(),isEditing:l}),(0,a.jsxs)("div",{className:"bg-[#3a3a3a] rounded-lg p-4 mb-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold mb-4",children:l?"Modifier la r\xe9servation":"Nouvelle r\xe9servation (appel t\xe9l\xe9phonique)"}),o.text&&(0,a.jsx)("div",{className:"p-3 mb-4 rounded ".concat("error"===o.type?"bg-red-900/30 text-red-300":"bg-green-900/30 text-green-300"),children:o.text}),(0,a.jsxs)("form",{onSubmit:s,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Nom du client*"}),(0,a.jsx)("input",{type:"text",name:"customerName",value:t.customerName,onChange:r,className:"w-full bg-[#2a2a2a] border border-[#4a4a4a] rounded-lg p-2",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"T\xe9l\xe9phone*"}),(0,a.jsx)("input",{type:"tel",name:"customerPhone",value:t.customerPhone,onChange:r,className:"w-full bg-[#2a2a2a] border border-[#4a4a4a] rounded-lg p-2",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Email (optionnel)"}),(0,a.jsx)("input",{type:"email",name:"customerEmail",value:t.customerEmail,onChange:r,className:"w-full bg-[#2a2a2a] border border-[#4a4a4a] rounded-lg p-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Nombre de personnes*"}),(0,a.jsx)("input",{type:"number",name:"numberOfGuests",min:"1",value:t.numberOfGuests,onChange:r,className:"w-full bg-[#2a2a2a] border border-[#4a4a4a] rounded-lg p-2",required:!0})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Cr\xe9neau horaire*"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(w.A,{date:(0,d.GP)(i,"yyyy-MM-dd"),time:t.time,setFormData:e=>{r({target:{name:"time",value:e.time||e}})},isAdmin:!0})}),!t.time&&(0,a.jsx)("p",{className:"text-orange-400 text-sm mt-2",children:"Veuillez s\xe9lectionner un cr\xe9neau horaire"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Demandes sp\xe9ciales"}),(0,a.jsx)("textarea",{name:"specialRequests",value:t.specialRequests,onChange:r,className:"w-full bg-[#2a2a2a] border border-[#4a4a4a] rounded-lg p-2 min-h-[80px]"})]}),(0,a.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,a.jsx)("button",{type:"submit",disabled:n||!t.time,className:"px-6 py-2 bg-[#C4B5A2] text-black rounded-lg font-medium hover:bg-[#d8c7b2] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Traitement...":l?"Mettre \xe0 jour la r\xe9servation":"Cr\xe9er la r\xe9servation"})})]})]})}let E=(0,h.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function T(e){let{reservations:t}=e;return(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([[...new Set(t.map(e=>e.customerPhone.replace(/\s+/g,"")))].join("\n")],{type:"text/plain"}),r=window.URL.createObjectURL(e),a=document.createElement("a"),s=new Date,n=(s.getMonth()+1).toString().padStart(2,"0"),o=s.getFullYear();a.href=r,a.download="Num\xe9ros de t\xe9l\xe9phone Au Tiki, ".concat(n," ").concat(o,".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)},className:"flex items-center gap-2 bg-[#C4B5A2] text-black px-4 py-2 rounded-md hover:bg-[#a39482] transition-colors",children:[(0,a.jsx)(E,{size:20}),"Exporter les num\xe9ros de t\xe9l\xe9phone"]})}var A=r(32423);let C=(0,h.A)("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);var M=r(92823);let R="https://api.votredomaine.com";function q(){let[e,t]=(0,s.useState)(new Date),[r,n]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(null),[m,h]=(0,s.useState)([]),[v,g]=(0,s.useState)([]),[x,f]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[j,k]=(0,s.useState)(null),[w,E]=(0,s.useState)(null),[q,F]=(0,s.useState)(!1),[P,I]=(0,s.useState)({customerName:"",customerEmail:"",customerPhone:"",numberOfGuests:2,time:"",specialRequests:""}),[O,G]=(0,s.useState)({customerName:"",customerEmail:"",customerPhone:"",numberOfGuests:2,time:"",eventType:"special",specialRequests:""}),[B,z]=(0,s.useState)(!1),[V,Y]=(0,s.useState)({type:"",text:""}),[H,L]=(0,s.useState)([]);(0,s.useEffect)(()=>{J(),U(),_()},[]),(0,s.useEffect)(()=>{J(),U(),_()},[e]),(0,s.useEffect)(()=>{if(u){let e=new Date(u);e.toLocaleDateString(),J(),U(),_(),setTimeout(()=>{K(e)},500)}},[u]);let J=async()=>{try{let e=await fetch("".concat(R,"/reservations"));if(!e.ok)throw Error("Erreur lors du chargement des r\xe9servations");let t=await e.json();t=el(t),n(t),u&&W(u)}catch(e){console.error("Erreur:",e)}},U=async()=>{try{let e=await fetch("".concat(R,"/events"));if(!e.ok){console.log("API \xe9v\xe9nements non disponible, initialisation avec un tableau vide"),c([]);return}let t=await e.json();c(t),u&&$(u)}catch(e){console.error("Erreur:",e),c([])}},_=async()=>{try{let e=localStorage.getItem("token");if(!e){console.warn("Pas de token d'authentification pour les commandes de fruits de mer");return}let t=await fetch("".concat(R,"/seafood-orders"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){let e=await t.text();throw console.error("Erreur API (".concat(t.status,"): ").concat(e)),Error("Erreur lors du chargement des commandes de fruits de mer: ".concat(t.status))}let r=await t.json();L(r),u&&K(u)}catch(e){console.error("Erreur lors du chargement des commandes de fruits de mer:",e)}},Z=(e,t)=>{let[r,a,s]=e.split("-").map(Number),n=t.filter(t=>{try{if("string"==typeof t.pickupDate&&t.pickupDate===e)return!0;let n=null;if("string"==typeof t.pickupDate&&t.pickupDate.includes("-")){let e=t.pickupDate.split("-");if(e.length>=3){n=parseInt(e[2].split("T")[0]);let t=parseInt(e[1]),o=parseInt(e[0]);if(n===s&&t===a&&o===r)return!0}}else if("string"==typeof t.pickupDate&&t.pickupDate.includes("/")){let e=t.pickupDate.split("/");if(3===e.length){n=parseInt(e[0]);let t=parseInt(e[1]),o=parseInt(e[2]);if(n===s&&t===a&&o===r)return!0}}else try{let e=new Date(t.pickupDate);if(!isNaN(e.getTime())){n=e.getDate();let t=e.getMonth()+1,o=e.getFullYear();if(n===s&&t===a&&o===r)return!0}}catch(e){console.error("Erreur lors de la conversion de la date pour la commande ".concat(t.id,":"),e)}if(n===s)return!0;return!1}catch(e){return console.error("Erreur de format de date pour la commande ".concat(t.id,":"),e),!1}});if(0===n.length){let e=t.filter(e=>{try{let t=null;if("string"==typeof e.pickupDate){if(e.pickupDate.includes("-")){let r=e.pickupDate.split("-");r.length>=3&&(t=parseInt(r[2].split("T")[0]))}else e.pickupDate.includes("/")&&(t=parseInt(e.pickupDate.split("/")[0]))}if(null===t){let r=new Date(e.pickupDate);isNaN(r.getTime())||(t=r.getDate())}return t===s}catch(e){return!1}});if(e.length>0)return e}return n},X=e=>{let t=[],r={};return e.forEach(e=>{if(e.specialRequests&&e.specialRequests.includes("\xc9V\xc9NEMENT")){let t=e.specialRequests.match(/ÉVÉNEMENT #\d+\/\d+ \((\d+) pers\. total\)/),a=e.specialRequests.match(/Type: (special|private|public)/);if(t){let s=t[1];a&&a[1];let n="".concat(e.customerName,"-").concat(e.reservationDateTime,"-").concat(s);r[n]||(r[n]=[]),r[n].push(e)}}}),Object.entries(r).forEach(e=>{let[r,a]=e;if(a.length>0){var s,n,o;let e=a[0],r=null===(s=e.specialRequests)||void 0===s?void 0:s.match(/ÉVÉNEMENT #\d+\/\d+ \((\d+) pers\. total\)/),i=null===(n=e.specialRequests)||void 0===n?void 0:n.match(/Type: (special|private|public)/),l=null===(o=e.specialRequests)||void 0===o?void 0:o.match(/- (.*)/),c=r?parseInt(r[1]):a.reduce((e,t)=>e+t.numberOfGuests,0),u=i?i[1]:"special",d=l?l[1]:"",m=new Date(e.reservationDateTime),p=m.getHours().toString().padStart(2,"0"),h=m.getMinutes().toString().padStart(2,"0");t.push({id:e.id,title:"\xc9v\xe9nement ".concat("private"===u?"priv\xe9":"sp\xe9cial"," (").concat(c," pers.)"),description:d,eventDate:"".concat(m.getFullYear(),"-").concat(String(m.getMonth()+1).padStart(2,"0"),"-").concat(String(m.getDate()).padStart(2,"0")),startTime:"".concat(p,":").concat(h),endTime:"",maxGuests:c,type:u,color:"private"===u?"#4CAF50":"#2196F3",customerName:e.customerName,customerEmail:e.customerEmail,customerPhone:e.customerPhone,reservationIds:a.map(e=>e.id),isPickup:!1})}}),t},K=e=>{let t=r.filter(t=>new Date(t.reservationDateTime).toDateString()===e.toDateString());h(t.filter(e=>!(e.specialRequests&&(e.specialRequests.includes("\xc9V\xc9NEMENT")||e.specialRequests.includes("\xc9v\xe9nement"))))),Q(e,t)},Q=(e,t)=>{let r="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"));g([...o.filter(e=>e.eventDate===r),...X(t),...Z(r,H).map(t=>{var r,a;let s=((null===(r=t.plateaux)||void 0===r?void 0:r.reduce((e,t)=>e+t.quantity,0))||0)+((null===(a=t.items)||void 0===a?void 0:a.reduce((e,t)=>e+t.quantity,0))||0),n="";t.plateaux&&t.plateaux.length>0&&(n+="Plateaux: ".concat(t.plateaux.map(e=>"".concat(e.name," (").concat(e.quantity,")")).join(", "),". ")),t.items&&t.items.length>0&&(n+="Articles: ".concat(t.items.map(e=>"".concat(e.name," (").concat(e.quantity,")")).join(", ")));let o=new Date(e),i="".concat(o.getFullYear(),"-").concat(String(o.getMonth()+1).padStart(2,"0"),"-").concat(String(o.getDate()).padStart(2,"0"));return{id:parseInt(t.id),title:"Commande Fruits de Mer (".concat(s," articles)"),description:n,eventDate:i,startTime:t.pickupTime,endTime:"",maxGuests:s,type:"seafood",color:"#FF9370",customerName:t.customerName,customerEmail:t.customerEmail||"",customerPhone:t.customerPhone,isPickup:t.isPickup}})])},W=e=>{d(e)},$=(e,t)=>{let r="".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"),"-").concat(String(e.getDate()).padStart(2,"0"));g([...o.filter(e=>e.eventDate===r),...X(t||m),...Z(r,H).map(t=>{var r,a;let s=((null===(r=t.plateaux)||void 0===r?void 0:r.reduce((e,t)=>e+t.quantity,0))||0)+((null===(a=t.items)||void 0===a?void 0:a.reduce((e,t)=>e+t.quantity,0))||0),n="";t.plateaux&&t.plateaux.length>0&&(n+="Plateaux: ".concat(t.plateaux.map(e=>"".concat(e.name," (").concat(e.quantity,")")).join(", "),". ")),t.items&&t.items.length>0&&(n+="Articles: ".concat(t.items.map(e=>"".concat(e.name," (").concat(e.quantity,")")).join(", ")));let o=new Date(e),i="".concat(o.getFullYear(),"-").concat(String(o.getMonth()+1).padStart(2,"0"),"-").concat(String(o.getDate()).padStart(2,"0"));return{id:parseInt(t.id),title:"Commande Fruits de Mer (".concat(s," articles)"),description:n,eventDate:i,startTime:t.pickupTime,endTime:"",maxGuests:s,type:"seafood",color:"#FF9370",customerName:t.customerName,customerEmail:t.customerEmail||"",customerPhone:t.customerPhone,isPickup:t.isPickup}})])},ee=async e=>{if(!q)try{F(!0);let t=localStorage.getItem("token");if(!t){console.error("❌ Aucun token d'authentification trouv\xe9"),l.oR.error("Vous devez \xeatre connect\xe9 pour supprimer une r\xe9servation"),F(!1);return}let r="".concat("https://api.votredomaine.com","/reservations/").concat(e),a=await fetch(r,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!a.ok){console.error("❌ Erreur HTTP:",a.status);let e="Erreur ".concat(a.status," lors de la suppression");try{let t=await a.json();console.error("\uD83D\uDCC4 D\xe9tails de l'erreur:",t),e=t.message||e}catch(e){console.error("❌ Pas de d\xe9tails JSON dans la r\xe9ponse d'erreur")}throw Error(e)}n(t=>t.filter(t=>t.id!==e)),h(t=>t.filter(t=>t.id!==e)),l.oR.success("R\xe9servation supprim\xe9e avec succ\xe8s")}catch(e){console.error("❌ Erreur lors de la suppression:",e),l.oR.error("Erreur: ".concat(e instanceof Error?e.message:"Impossible de supprimer la r\xe9servation"))}finally{F(!1)}},et=async e=>{if(e.preventDefault(),!u){Y({type:"error",text:"Veuillez s\xe9lectionner une date"});return}z(!0),Y({type:"",text:""});let[t,r]=P.time.split(":"),a=new Date(u);a.setHours(parseInt(t),parseInt(r),0,0);try{let e;if(!j){let e=await fetch("".concat(R,"/reservations/available-slots?date=").concat(u.toISOString().split("T")[0]));if(!e.ok)throw Error("Erreur lors de la v\xe9rification des cr\xe9neaux disponibles");let r=await e.json(),a=(15>parseInt(t)?r.lunch:r.dinner).find(e=>e.time===P.time);if(!a)throw Error("Cr\xe9neau horaire non disponible");if(P.numberOfGuests>a.remainingCapacity){Y({type:"error",text:"Ce cr\xe9neau ne peut pas accueillir ".concat(P.numberOfGuests," personnes (capacit\xe9 restante: ").concat(a.remainingCapacity,")")}),z(!1);return}}let r={customerName:P.customerName,customerEmail:P.customerEmail||"reservation@telephone.com",customerPhone:P.customerPhone,numberOfGuests:P.numberOfGuests,reservationDateTime:a.toISOString(),specialRequests:P.specialRequests};if(j){console.log("Mise \xe0 jour de la r\xe9servation:",j.id);let t=localStorage.getItem("token");if(!t){console.error("❌ Pas de token d'authentification"),Y({type:"error",text:"Vous devez \xeatre connect\xe9 pour modifier une r\xe9servation"}),z(!1);return}let a=await fetch("".concat(R,"/reservations/").concat(j.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(r)});if(!a.ok){let e=await a.text();throw console.error("R\xe9ponse API d'erreur:",e),Error("Erreur lors de la mise \xe0 jour de la r\xe9servation: ".concat(a.status," ").concat(e))}e=await a.json(),console.log("R\xe9servation mise \xe0 jour avec succ\xe8s:",e),n(t=>t.map(t=>t.id===j.id?e:t)),h(t=>t.map(t=>t.id===j.id?e:t)),Y({type:"success",text:"R\xe9servation mise \xe0 jour avec succ\xe8s"})}else{let t=await fetch("".concat(R,"/reservations"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,createdAt:new Date().toISOString()})});if(!t.ok)throw Error("Erreur lors de la cr\xe9ation de la r\xe9servation");e=await t.json(),n(t=>[...t,e]),h(t=>[...t,e]),Y({type:"success",text:"R\xe9servation ajout\xe9e avec succ\xe8s"})}I({customerName:"",customerEmail:"",customerPhone:"",numberOfGuests:2,time:"",specialRequests:""}),k(null),setTimeout(()=>{f(!1),Y({type:"",text:""})},2e3)}catch(e){console.error("Erreur:",e),Y({type:"error",text:"Erreur: ".concat(e instanceof Error?e.message:"lors de l'op\xe9ration")})}finally{z(!1)}},er=e=>{let{name:t,value:r}=e.target;G(e=>({...e,[t]:"numberOfGuests"===t?parseInt(r):r}))},ea=async e=>{if(e.preventDefault(),!u){l.oR.error("Veuillez s\xe9lectionner une date");return}z(!0);try{let e;let t="".concat(u.getFullYear(),"-").concat(String(u.getMonth()+1).padStart(2,"0"),"-").concat(String(u.getDate()).padStart(2,"0")),r=parseInt(O.numberOfGuests),a=r>20,s=a?Math.ceil(r/20):1;"Cr\xe9ation d'un \xe9v\xe9nement avec ".concat(r," personnes, n\xe9cessitant ").concat(s," r\xe9servations");let n={customerName:O.customerName,customerEmail:O.customerEmail,customerPhone:O.customerPhone,numberOfGuests:a?20:r,reservationDateTime:"".concat(t,"T").concat(O.time,":00.000Z"),specialRequests:"\xc9V\xc9NEMENT #1/".concat(s," (").concat(r," pers. total) - Type: ").concat(O.eventType," - ").concat(O.specialRequests||""),createdAt:new Date().toISOString(),isEvent:!0};if(w){let t=await fetch("".concat(R,"/reservations/").concat(w.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok){let e=await t.text();throw console.error("Erreur API:",e),Error("Erreur lors de la mise \xe0 jour de l'\xe9v\xe9nement: ".concat(t.status," ").concat(e))}e=await t.json()}else{let o=await fetch("".concat(R,"/reservations"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){let e=await o.text();throw console.error("Erreur API:",e),Error("Erreur lors de la cr\xe9ation de l'\xe9v\xe9nement: ".concat(o.status," ").concat(e))}if(e=await o.json(),a&&s>1){let e=r-20;for(let a=1;a<s;a++){let n=Math.min(20,e-(a-1)*20);if(n<=0)break;let o={customerName:O.customerName,customerEmail:O.customerEmail,customerPhone:O.customerPhone,numberOfGuests:n,reservationDateTime:"".concat(t,"T").concat(O.time,":00.000Z"),specialRequests:"\xc9V\xc9NEMENT #".concat(a+1,"/").concat(s," (").concat(r," pers. total) - Type: ").concat(O.eventType),createdAt:new Date().toISOString(),isEvent:!0};try{let e=await fetch("".concat(R,"/reservations"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok){console.warn("Avertissement: Impossible de cr\xe9er la r\xe9servation additionnelle #".concat(a+1));continue}await e.json()}catch(e){console.warn("Erreur pour la r\xe9servation additionnelle #".concat(a+1,":"),e)}}}}let o={id:e.id,title:"".concat("private"===O.eventType?"\xc9v\xe9nement priv\xe9":"\xc9v\xe9nement sp\xe9cial"," (").concat(r," pers.)"),description:O.specialRequests||"",eventDate:t,startTime:O.time,endTime:"",maxGuests:r,type:O.eventType,color:"private"===O.eventType?"#4CAF50":"#2196F3",customerName:O.customerName,customerEmail:O.customerEmail,customerPhone:O.customerPhone,reservationIds:[],isPickup:!1};w?(c(e=>e.map(e=>e.id===w.id?o:e)),g(e=>e.map(e=>e.id===w.id?o:e)),l.oR.success("\xc9v\xe9nement mis \xe0 jour avec succ\xe8s")):(c(e=>[...e,o]),g(e=>[...e,o]),l.oR.success("\xc9v\xe9nement ajout\xe9 avec succ\xe8s")),G({customerName:"",customerEmail:"",customerPhone:"",numberOfGuests:2,time:"",eventType:"special",specialRequests:""}),E(null),N(!1)}catch(e){console.error("Erreur:",e),l.oR.error("Erreur: ".concat(e instanceof Error?e.message:"lors de l'op\xe9ration"))}finally{z(!1)}},es=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet \xe9v\xe9nement ?"))try{let t=v.find(t=>t.id===e);if(!t)throw Error("\xc9v\xe9nement non trouv\xe9");if(t.reservationIds&&t.reservationIds.length>0){for(let e of(t.reservationIds.length,t.reservationIds))try{(await fetch("".concat(R,"/reservations/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok||console.warn("Avertissement: Impossible de supprimer la r\xe9servation associ\xe9e #".concat(e))}catch(t){console.warn("Erreur lors de la suppression de la r\xe9servation associ\xe9e #".concat(e,":"),t)}n(e=>e.filter(e=>{var r;return!(null===(r=t.reservationIds)||void 0===r?void 0:r.includes(e.id))}))}else(await fetch("".concat(R,"/events/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok||console.warn("Avertissement: Impossible de supprimer l'\xe9v\xe9nement #".concat(e));c(t=>t.filter(t=>t.id!==e)),g(t=>t.filter(t=>t.id!==e)),l.oR.success("\xc9v\xe9nement supprim\xe9 avec succ\xe8s"),J(),setTimeout(()=>{J(),u&&W(u)},100)}catch(e){console.error("Erreur:",e),l.oR.error("Erreur lors de la suppression de l'\xe9v\xe9nement")}},en=e=>{if(E(e),e.reservationIds&&e.reservationIds.length>0){let t=r.filter(t=>{var r;return null===(r=e.reservationIds)||void 0===r?void 0:r.includes(t.id)});t.length>0&&t.length}G({customerName:e.customerName||"",customerEmail:e.customerEmail||"",customerPhone:e.customerPhone||"",numberOfGuests:e.maxGuests||2,time:e.startTime||"",eventType:e.type,specialRequests:e.description||""}),N(!0)};(0,s.useEffect)(()=>{console.log("\xc9tat des formulaires:",{showAddForm:x,showAddEventForm:y,editingReservation:j})},[x,y,j]);let eo=async(e,t,a)=>{try{let s=localStorage.getItem("token");if(!s){console.error("❌ Aucun token d'authentification trouv\xe9"),l.oR.error("Vous devez \xeatre connect\xe9 pour mettre \xe0 jour une r\xe9servation");return}n(r=>r.map(r=>r.id===e?{...r,tableNumber:t,isArrived:a}:r)),h(r=>r.map(r=>r.id===e?{...r,tableNumber:t,isArrived:a}:r));let o={tableNumber:t,isArrived:a};console.log("Envoi des donn\xe9es \xe0 l'API: ".concat(JSON.stringify(o)));let i=await fetch("".concat(R,"/admin/reservations/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)});if(!i.ok){console.error("❌ Erreur API (".concat(i.status,"): La r\xe9servation a \xe9t\xe9 mise \xe0 jour localement mais pas sur le serveur")),l.oR.error("Mise \xe0 jour du statut sauvegard\xe9e localement uniquement"),ei([...r]);return}l.oR.success("Table ".concat(t," ").concat(a?"arriv\xe9e":"non arriv\xe9e"))}catch(e){console.error("❌ Erreur lors de la mise \xe0 jour:",e),l.oR.error("Erreur: ".concat(e instanceof Error?e.message:"Impossible de mettre \xe0 jour la r\xe9servation")),ei([...r])}},ei=e=>{try{let t=e.reduce((e,t)=>((t.tableNumber||t.isArrived)&&(e[t.id]={tableNumber:t.tableNumber,isArrived:t.isArrived}),e),{});localStorage.setItem("reservation-status",JSON.stringify(t)),console.log("\xc9tats des r\xe9servations sauvegard\xe9s dans localStorage:",t)}catch(e){console.error("Erreur lors de la sauvegarde dans localStorage:",e)}},el=e=>{try{let t=localStorage.getItem("reservation-status");if(!t)return e;let r=JSON.parse(t);return console.log("\xc9tats des r\xe9servations charg\xe9s depuis localStorage:",r),e.map(e=>{let t=r[e.id];return t?{...e,tableNumber:t.tableNumber,isArrived:t.isArrived}:e})}catch(t){return console.error("Erreur lors du chargement depuis localStorage:",t),e}};return(0,a.jsx)("div",{className:"min-h-screen bg-[#1a1a1a] text-white",children:(0,a.jsxs)("div",{className:"container mt-40 mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Calendrier des r\xe9servations"}),(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsx)(T,{reservations:r})})]}),(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-xl p-6 border border-[#C4B5A2]/30 mb-8",children:[(0,a.jsx)(p,{currentDate:e,onPrevMonth:()=>t(i(e,-1,void 0)),onNextMonth:()=>t(i(e,1))}),(0,a.jsx)(b,{currentDate:e,selectedDate:u,reservations:r,events:o,seafoodOrders:H,onSelectDate:W})]}),u&&(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-xl p-6 border border-[#C4B5A2]/30 mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-[#C4B5A2]",children:u.toLocaleDateString("fr-FR",{dateStyle:"long"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{f(!x),N(!1),k(null),I({customerName:"",customerEmail:"",customerPhone:"",numberOfGuests:2,time:"",specialRequests:""})},className:"px-4 py-2 bg-[#C4B5A2] text-black rounded-lg font-medium hover:bg-[#d8c7b2] transition-colors flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-4 h-4"}),x?"Annuler":"R\xe9servation"]}),(0,a.jsxs)("button",{onClick:()=>{N(!y),f(!1),E(null),G({customerName:"",customerEmail:"",customerPhone:"",numberOfGuests:2,time:"",eventType:"special",specialRequests:""})},className:"px-4 py-2 bg-[#2196F3] text-black rounded-lg font-medium hover:bg-[#64B5F6] transition-colors flex items-center gap-2",children:[(0,a.jsx)(C,{className:"w-4 h-4"}),y?"Annuler":"\xc9v\xe9nement"]})]})]}),x&&(0,a.jsx)(D,{formData:P,onChange:e=>{let{name:t,value:r}=e.target;I(e=>({...e,[t]:"numberOfGuests"===t?parseInt(r):r}))},onSubmit:et,isSubmitting:B,submitMessage:V,selectedDate:u,isEditing:!!j}),y&&(0,a.jsxs)("div",{className:"bg-[#1a1a1a] rounded-lg p-6 mb-6 border border-[#2196F3]/30",children:[(0,a.jsx)("h4",{className:"text-lg font-medium mb-4 text-[#2196F3]",children:w?"Modifier l'\xe9v\xe9nement":"Ajouter un \xe9v\xe9nement"}),(0,a.jsxs)("form",{onSubmit:ea,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nom complet*"}),(0,a.jsx)("input",{type:"text",name:"customerName",value:O.customerName,onChange:er,className:"w-full p-2 bg-[#2a2a2a] border border-[#444] rounded focus:outline-none focus:border-[#2196F3]",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email*"}),(0,a.jsx)("input",{type:"email",name:"customerEmail",value:O.customerEmail,onChange:er,className:"w-full p-2 bg-[#2a2a2a] border border-[#444] rounded focus:outline-none focus:border-[#2196F3]",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"T\xe9l\xe9phone*"}),(0,a.jsx)("input",{type:"tel",name:"customerPhone",value:O.customerPhone,onChange:er,className:"w-full p-2 bg-[#2a2a2a] border border-[#444] rounded focus:outline-none focus:border-[#2196F3]",required:!0,placeholder:"07 09 08 07 06"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre de personnes*"}),(0,a.jsx)("input",{type:"number",name:"numberOfGuests",value:O.numberOfGuests,onChange:er,min:"1",max:"500",className:"w-full p-2 bg-[#2a2a2a] border border-[#444] rounded focus:outline-none focus:border-[#2196F3]",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Heure*"}),(0,a.jsx)("input",{type:"time",name:"time",value:O.time,onChange:er,className:"w-full p-2 bg-[#2a2a2a] border border-[#444] rounded focus:outline-none focus:border-[#2196F3]",required:!0})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Type d'\xe9v\xe9nement"}),(0,a.jsxs)("select",{name:"eventType",value:O.eventType||"special",onChange:er,className:"w-full p-2 bg-[#2a2a2a] border border-[#444] rounded focus:outline-none focus:border-[#2196F3]",children:[(0,a.jsx)("option",{value:"special",children:"\xc9v\xe9nement sp\xe9cial"}),(0,a.jsx)("option",{value:"private",children:"\xc9v\xe9nement priv\xe9"}),(0,a.jsx)("option",{value:"public",children:"\xc9v\xe9nement public"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"D\xe9tails et demandes sp\xe9ciales"}),(0,a.jsx)("textarea",{name:"specialRequests",value:O.specialRequests||"",onChange:er,rows:4,className:"w-full p-2 bg-[#2a2a2a] border border-[#444] rounded focus:outline-none focus:border-[#2196F3]",placeholder:"D\xe9tails sur votre \xe9v\xe9nement, menu sp\xe9cial, arrangement des tables, etc."})]}),(0,a.jsx)("div",{className:"md:col-span-2 flex justify-end pt-4",children:(0,a.jsx)("button",{type:"submit",disabled:B,className:"px-6 py-2 bg-[#2196F3] text-white rounded-lg font-medium hover:bg-[#64B5F6] transition-colors",children:B?"Enregistrement...":w?"Mettre \xe0 jour":"Ajouter l'\xe9v\xe9nement"})})]})]}),v.length>0&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h4",{className:"text-lg font-medium mb-4 text-[#2196F3] flex items-center",children:[(0,a.jsx)(C,{className:"w-5 h-5 mr-2"}),"\xc9v\xe9nements"]}),(0,a.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,a.jsxs)("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border-l-4",style:{borderLeftColor:e.color},children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-medium text-white",children:e.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[e.startTime," - ","seafood"===e.type&&"isPickup"in e?e.isPickup?"\xc0 emporter":"Sur place":e.endTime]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-300 mt-2",children:e.description})]}),(0,a.jsx)("div",{className:"flex space-x-2",children:"seafood"!==e.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>en(e),className:"text-[#2196F3] hover:text-[#64B5F6]",children:"Modifier"}),(0,a.jsx)("button",{onClick:()=>es(e.id),className:"text-red-400 hover:text-red-300",children:"Supprimer"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(M.A,{className:"w-4 h-4 text-gray-400 mr-1"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"seafood"===e.type?"".concat(e.maxGuests," articles"):"".concat(e.maxGuests," personnes max.")})]})]},e.id))})]}),(0,a.jsxs)("h4",{className:"text-lg font-medium mb-4 text-[#C4B5A2] flex items-center",children:[(0,a.jsx)(A.A,{className:"w-5 h-5 mr-2"}),"R\xe9servations"]}),(0,a.jsx)(S,{reservations:m,onEdit:e=>{if(console.log("startEditReservation appel\xe9 avec:",e),!e){console.error("R\xe9servation invalide:",e);return}try{k(e);let t=new Date(e.reservationDateTime);console.log("Date de r\xe9servation:",t);let r="".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"));console.log("Heure format\xe9e:",r);let a={customerName:e.customerName,customerEmail:e.customerEmail||"",customerPhone:e.customerPhone,numberOfGuests:e.numberOfGuests,time:r,specialRequests:e.specialRequests||""};I(a),N(!1),setTimeout(()=>{console.log("Affichage forc\xe9 du formulaire..."),f(!0)},100)}catch(e){console.error("Erreur lors de la pr\xe9paration de la modification:",e)}},onDelete:ee,onTableUpdate:eo,isDeleting:q})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4069,672,5745,53,8441,1517,7358],()=>t(11200)),_N_E=e.O()}]);