(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6782],{13233:(e,t,r)=>{Promise.resolve().then(r.bind(r,90478))},40767:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(67401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},76046:(e,t,r)=>{"use strict";var s=r(66658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},90478:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(95155),a=r(12115),n=r(17146),o=r(55037),i=r(76046),l=r(5565),c=r(40767);function d(e){let{children:t,title:r,onClose:n}=e,o=(0,a.useRef)(null),i=e=>{o.current&&!o.current.contains(e.target)&&n()},l=e=>{"Escape"===e.key&&n()};return(0,a.useEffect)(()=>(document.body.style.overflow="hidden",document.addEventListener("mousedown",i),document.addEventListener("keydown",l),()=>{document.body.style.overflow="auto",document.removeEventListener("mousedown",i),document.removeEventListener("keydown",l)}),[n]),(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:(0,s.jsxs)("div",{ref:o,className:"bg-[#1a1a1a] rounded-lg shadow-lg max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-[#3a3a3a]",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#C4B5A2]",children:r}),(0,s.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(c.A,{size:20})})]}),(0,s.jsx)("div",{className:"p-4",children:t})]})})}function u(){let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)(!0),{user:u,isAuthenticated:m,refreshLogin:p,token:h}=(0,n.h)(),x=(0,i.useRouter)(),[g,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)([]),[j,y]=(0,a.useState)([]),[N,k]=(0,a.useState)(!1),[w,C]=(0,a.useState)("reservations"),[S,E]=(0,a.useState)(null),[A,R]=(0,a.useState)(!1),[T,D]=(0,a.useState)({date:"",time:"",guests:2,specialRequests:"",sendSms:!0}),[P,q]=(0,a.useState)(null),[B,I]=(0,a.useState)(!1),[z,M]=(0,a.useState)({pickupDate:"",pickupTime:"",specialRequests:"",isPickup:!0,sendSms:!0}),[O,J]=(0,a.useState)(!1),[F,L]=(0,a.useState)([]),[H,V]=(0,a.useState)(null),[G,U]=(0,a.useState)(null),[_,Y]=(0,a.useState)(!0),[$,X]=(0,a.useState)(!1),Z=(0,a.useRef)(""),[K,Q]=(0,a.useState)({visible:!1,message:""}),W={pickupDate:"",pickupTime:"",specialRequests:"",isPickup:!0,sendSms:!0};(0,a.useEffect)(()=>{r||m||(o.oR.error("Veuillez vous connecter pour acc\xe9der \xe0 vos r\xe9servations"),x.push("/login"))},[m,r,x]),(0,a.useEffect)(()=>{u&&u.id&&!g?(et(),b(!0)):u||r||c(!1)},[u,g,r]),(0,a.useEffect)(()=>{u&&u.id&&!N&&(er(),k(!0))},[u,N]);let ee=async e=>{try{let t=await fetch("".concat("https://api.votredomaine.com","/reservations/available-slots?date=").concat(e));if(!t.ok)throw Error("Erreur lors du chargement des cr\xe9neaux disponibles");let r=await t.json(),s=[...r.lunch,...r.dinner];if(S){let e="".concat(S.time.split(":")[0],":").concat(S.time.split(":")[1]);s.some(t=>t.time===e)||s.push({time:e,available:!0,remainingCapacity:S.guests})}L(s)}catch(e){console.error("Erreur lors du chargement des cr\xe9neaux:",e),o.oR.error("Impossible de charger les cr\xe9neaux disponibles"),S?L([{time:"".concat(S.time.split(":")[0],":").concat(S.time.split(":")[1]),available:!0}]):L([...["12:00","12:30","13:00","13:30","14:00"].map(e=>({time:e,available:!0})),...["19:00","19:30","20:00","20:30","21:00"].map(e=>({time:e,available:!0}))])}},et=(0,a.useCallback)(async()=>{c(!0);try{let e=null,r=!1,s="";if(m&&u)try{let t=localStorage.getItem("token");h!==t&&console.warn("Page: Attention - Le token du contexte ne correspond pas au token stock\xe9");let a=h||t;if(!a)throw console.error("Page: Aucun token disponible. Impossible de faire la requ\xeate authentifi\xe9e."),Error("Token manquant");if((e=await fetch("/api/reservations/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}})).ok)r=!0;else{let t=await e.json();if(s=t.message||"Erreur d'authentification",console.error("Page: Erreur avec le token:",e.status,t),t.message&&t.message.includes("Token")){if(console.log("Page: Tentative de rafra\xeechir la session..."),await p()){if(localStorage.getItem("token"),(e=await fetch("/api/reservations/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).ok)r=!0,console.log("Page: R\xe9servations r\xe9cup\xe9r\xe9es avec succ\xe8s apr\xe8s rafra\xeechissement");else{let t=await e.json();s=t.message||"\xc9chec apr\xe8s rafra\xeechissement",console.error("Page: \xc9chec apr\xe8s rafra\xeechissement:",e.status,t)}}else console.log("Page: \xc9chec du rafra\xeechissement de session")}}}catch(e){console.error("Page: Erreur lors de la requ\xeate authentifi\xe9e:",e),s="Erreur de communication avec le serveur"}if(!r){console.log("Tentative de r\xe9cup\xe9ration des r\xe9servations par email/t\xe9l\xe9phone");let t=new URLSearchParams;(null==u?void 0:u.email)&&t.append("email",u.email);let a=null==u?void 0:u.phoneNumber;if(a&&t.append("phone",a),!(null==u?void 0:u.email)&&!a){o.oR.error("Veuillez vous connecter ou fournir un email/t\xe9l\xe9phone pour voir vos r\xe9servations"),c(!1);return}try{if(console.log("Recherche avec param\xe8tres: ".concat(t.toString())),(e=await fetch("/api/reservations/search?".concat(t.toString()),{method:"GET",headers:{"Content-Type":"application/json"}})).ok)r=!0,console.log("R\xe9servations r\xe9cup\xe9r\xe9es avec succ\xe8s via email/t\xe9l\xe9phone");else{let t=await e.json();s=t.message||"Erreur de recherche",console.error("Erreur de recherche par email/t\xe9l\xe9phone:",t)}}catch(e){console.error("Erreur lors de la recherche par email/t\xe9l\xe9phone:",e),s="Erreur de communication lors de la recherche"}}if(!e||!r)throw Error("Aucune r\xe9ponse valide obtenue: ".concat(s));let a=await e.json();console.log("Donn\xe9es brutes du serveur:",JSON.stringify(a));let n=a.map(e=>{console.log("R\xe9servation #".concat(e.id," - donn\xe9es brutes:"),JSON.stringify(e));let t=e.date,r=e.time;if(e.reservationDateTime&&(!t||!r)&&e.reservationDateTime.includes("T")){let s=e.reservationDateTime.split("T");t=s[0],r=s[1].split(":")[0]+":"+s[1].split(":")[1]}return{...e,date:t,time:r}});console.log("R\xe9servations trait\xe9es sans conversion:",n),t(n)}catch(e){console.error("Erreur globale:",e),o.oR.error("Impossible de charger vos r\xe9servations: ".concat(e.message||"Erreur inconnue"))}finally{c(!1)}},[p,u,m,h]),er=(0,a.useCallback)(async()=>{try{let e=null,t=!1;console.log("Tentative de r\xe9cup\xe9ration des commandes par email/t\xe9l\xe9phone");let r=new URLSearchParams;(null==u?void 0:u.email)&&r.append("email",u.email);let s=null==u?void 0:u.phoneNumber;if(s&&r.append("phone",s),!(null==u?void 0:u.email)&&!s){console.log("Aucun email ou t\xe9l\xe9phone disponible pour chercher les commandes"),v([]);return}try{if(console.log("Recherche avec param\xe8tres: ".concat(r.toString())),e=await fetch("/api/seafood-orders/search?".concat(r.toString()),{method:"GET",headers:{"Content-Type":"application/json"}}),console.log("Statut de la r\xe9ponse API seafood-orders/search:",e.status),e.ok)t=!0,console.log("Commandes r\xe9cup\xe9r\xe9es avec succ\xe8s via email/t\xe9l\xe9phone");else{let t=await e.text();console.error("Erreur brute de l'API de recherche:",t);try{let e=JSON.parse(t);e.message,console.error("Erreur de recherche par email/t\xe9l\xe9phone:",e)}catch(r){console.error("Impossible de parser l'erreur comme JSON:",r),"Erreur ".concat(e.status,": ").concat(t.substring(0,100),"...")}}}catch(e){console.error("Erreur lors de la recherche par email/t\xe9l\xe9phone:",e)}if(!e||!t){v([]);return}try{let t=(await e.json()).map(e=>{let t=0,r=Array.isArray(e.plateaux)?e.plateaux.map(e=>{let r=0;void 0!==e.price?r=es(e.price):void 0!==e.unitPrice&&(r=es(e.unitPrice));let s=es(e.quantity);return t+=r*s,{...e,price:r,quantity:s}}):[],s=Array.isArray(e.items)?e.items.map(e=>{let r=0;void 0!==e.price?r=es(e.price):void 0!==e.unitPrice&&(r=es(e.unitPrice));let s=es(e.quantity);return t+=r*s,{...e,price:r,quantity:s}}):[],a="number"==typeof e.totalPrice&&e.totalPrice>0?e.totalPrice:t;return{...e,totalPrice:a,plateaux:r,items:s}});v(t)}catch(e){console.error("Erreur lors du parsing des donn\xe9es JSON:",e),v([])}}catch(e){console.error("Erreur globale lors de la r\xe9cup\xe9ration des commandes:",e),v([])}},[u]),es=e=>{if("number"==typeof e&&!isNaN(e))return e;if("string"==typeof e){let t=parseFloat(e);return isNaN(t)?0:t}return 0},ea=e=>{let{name:t,value:r}=e.target;"date"===t&&r!==T.date&&ee(r),D(e=>({...e,[t]:"guests"===t?parseInt(r):r}))},en=async e=>{e.preventDefault(),J(!0);try{let e=await ef(),r={customerName:(null==S?void 0:S.customerName)||"",customerEmail:(null==S?void 0:S.customerEmail)||"",customerPhone:(null==S?void 0:S.customerPhone)||"",numberOfGuests:T.guests,reservationDateTime:"".concat(T.date,"T").concat(T.time,":00.000Z"),specialRequests:T.specialRequests||"",userId:(null==S?void 0:S.userId)||1,isEvent:!1};console.log("Donn\xe9es envoy\xe9es \xe0 l'API:",JSON.stringify(r));let s=await fetch("/api/reservations/".concat(T.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:e?"Bearer ".concat(e):""},body:JSON.stringify(r)}),a=s.status,n=await s.text();if(console.log("R\xe9ponse API: ".concat(a," - ").concat(n)),!s.ok){let e="Erreur lors de la modification de la r\xe9servation";try{e=JSON.parse(n).message||e}catch(e){console.error("Erreur lors du parsing de la r\xe9ponse:",e)}throw Error(e)}t(e=>e.map(e=>e.id===T.id?{...e,date:T.date,time:T.time,guests:T.guests,specialRequests:T.specialRequests||e.specialRequests}:e)),R(!1),o.oR.success("R\xe9servation modifi\xe9e avec succ\xe8s")}catch(e){console.error("Erreur lors de la modification:",e),o.oR.error(e instanceof Error?e.message:"Erreur lors de la modification de la r\xe9servation")}finally{J(!1)}},eo=async e=>{V(e)},ei=async()=>{if(null!==H)try{let e=localStorage.getItem("token");if(!e){o.oR.error("Vous devez \xeatre connect\xe9 pour annuler une r\xe9servation"),V(null);return}let r=await fetch("/api/reservations/".concat(H),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({sendSms:_})});if(!r.ok){let e="Erreur ".concat(r.status," lors de l'annulation");try{e=(await r.json()).message||e}catch(e){}throw Error(e)}t(e=>e.filter(e=>e.id!==H)),o.oR.success("R\xe9servation annul\xe9e avec succ\xe8s"),et()}catch(e){console.error("Erreur compl\xe8te:",e),o.oR.error("Impossible d'annuler la r\xe9servation: ".concat(e.message||"Erreur inconnue")),e.message&&(e.message.includes("Token")||e.message.includes("auth")||e.message.includes("401"))&&p().then(e=>{e&&o.oR.success("Session rafra\xeechie, veuillez r\xe9essayer")})}finally{V(null)}},el=e=>{try{if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return e;let[t,r,s]=e.split("-").map(Number),a=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"][new Date(Date.UTC(t,r-1,s)).getUTCDay()];return"".concat(a," ").concat(s," ").concat(["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"][r-1]," ").concat(t)}catch(t){return console.error("Erreur lors du formatage de la date:",t),e}},ec=e=>{try{if(/^\d{2}:\d{2}$/.test(e))return e;if(e.includes("T"))return e.split("T")[1].substring(0,5);return e}catch(t){return console.error("Erreur lors du formatage de l'heure:",t),e}},ed=e=>{let t=new Date;return t.setHours(0,0,0,0),e.filter(e=>{let r=new Date(e.date);if(r<t)return!1;if(r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()){let t=new Date,[r,s]=e.time.split(":").map(Number);if(r<t.getHours()||r===t.getHours()&&s<t.getMinutes())return!1}return!0})},eu=e=>{let t=new Date;return t.setHours(0,0,0,0),e.filter(e=>{let r=new Date(e.pickupDate);if(r<t)return!1;if(r.getDate()===t.getDate()&&r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()){let t=new Date,[r,s]=e.pickupTime.split(":").map(Number);if(r<t.getHours()||r===t.getHours()&&s<t.getMinutes())return!1}return!0})},em=e=>{q(e),M({id:e.id,pickupDate:e.pickupDate,pickupTime:e.pickupTime,specialRequests:e.specialRequests||"",isPickup:e.isPickup,sendSms:!0}),I(!0)},ep=e=>{let{name:t,value:r}=e.target;"isPickup"===t?M(e=>({...e,[t]:"true"===r})):M(e=>({...e,[t]:r}))},eh=async e=>{e.preventDefault(),J(!0);try{let e;let t=await ef(),r={status:"pending",comment:"Modification par le client",pickupDate:z.pickupDate,pickupTime:z.pickupTime,isPickup:z.isPickup,specialRequests:z.specialRequests||""};console.log("Donn\xe9es de modification de commande:",r);let s=await fetch("/api/seafood-orders/".concat(z.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:t?"Bearer ".concat(t):""},body:JSON.stringify(r)});console.log("Statut de la r\xe9ponse de modification (token):",s.status);let a="";try{(a=await s.text())&&(e=JSON.parse(a))}catch(e){console.error("Erreur lors du parsing de la r\xe9ponse:",e)}if(!s.ok){let t="Erreur lors de la modification de la commande";throw e&&e.message&&(t=e.message),Error(t)}if(401===s.status||403===s.status){console.log("Tentative alternative avec email/t\xe9l\xe9phone");let t=await fetch("/api/seafood-orders/update-by-contact/".concat(z.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(console.log("Statut de la r\xe9ponse de la m\xe9thode alternative:",t.status),!t.ok){let e=await t.text(),r="Erreur lors de la modification de la commande";try{r=JSON.parse(e).message||r}catch(e){console.error("Erreur lors du parsing de la r\xe9ponse alternative:",e)}throw Error(r)}try{let r=await t.text();r&&(e=JSON.parse(r))}catch(e){console.error("Erreur lors du parsing de la r\xe9ponse alternative r\xe9ussie:",e)}}let n=(null==e?void 0:e.pickupDate)||z.pickupDate,o=(null==e?void 0:e.pickupTime)||z.pickupTime,i=(null==e?void 0:e.isPickup)!==void 0?e.isPickup:z.isPickup,l=(null==e?void 0:e.specialRequests)||z.specialRequests,c=e=>e.map(e=>e.id===z.id?{...e,pickupDate:n,pickupTime:o,specialRequests:l,isPickup:i}:e);v(c),y&&y(c),I(!1),X(!0),Z.current="Commande modifi\xe9e avec succ\xe8s",M(W)}catch(e){console.error("Erreur compl\xe8te:",e),Q({visible:!0,message:e instanceof Error?e.message:"Erreur lors de la modification de la commande"})}finally{J(!1)}},ex=e=>{U(e)},eg=async()=>{if(null!==G)try{let e=localStorage.getItem("token");if(!e){o.oR.error("Vous devez \xeatre connect\xe9 pour annuler une commande"),U(null);return}let t=await fetch("/api/seafood-orders/".concat(G),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({sendSms:_})});if(!t.ok){let e="Erreur ".concat(t.status," lors de l'annulation");try{e=(await t.json()).message||e}catch(e){}throw Error(e)}v(e=>e.filter(e=>e.id!==G)),o.oR.success("Commande annul\xe9e avec succ\xe8s"),er()}catch(e){console.error("Erreur compl\xe8te:",e),o.oR.error("Impossible d'annuler la commande: ".concat(e.message||"Erreur inconnue")),e.message&&(e.message.includes("Token")||e.message.includes("auth")||e.message.includes("401"))&&p().then(e=>{e&&o.oR.success("Session rafra\xeechie, veuillez r\xe9essayer")})}finally{U(null)}},eb=e=>{console.log(">>> D\xc9BUT \xc9DITION - R\xe9servation originale:",e),E(e),D({id:e.id,date:e.date,time:e.time,guests:e.guests,specialRequests:e.specialRequests||"",sendSms:!0}),console.log(">>> Formulaire initialis\xe9 avec date exacte:",e.date,"et heure exacte:",e.time),ee(e.date),R(!0)},ef=async()=>h?h:localStorage.getItem("token")||(await p()?localStorage.getItem("token"):null);return r?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-[#141414]",children:(0,s.jsx)("div",{className:"animate-bounce",children:(0,s.jsx)(l.default,{src:"/logos/TikiLogo.png",alt:"Chargement...",width:100,height:100})})}):(0,s.jsxs)("div",{className:"min-h-screen bg-[#0f0f0f] text-white relative",children:[(0,s.jsxs)("div",{className:"absolute inset-0 flex z-0 overflow-hidden pointer-events-none",children:[(0,s.jsxs)("div",{className:"w-[15%] sm:w-[20%] md:w-[25%] relative",children:[(0,s.jsx)(l.default,{src:"/decorations/leavesleft.webp",alt:"D\xe9coration gauche",fill:!0,className:"object-cover opacity-20"}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 w-1/3 bg-gradient-to-r from-transparent to-[#0f0f0f]"})]}),(0,s.jsx)("div",{className:"flex-grow bg-[#0f0f0f]"}),(0,s.jsxs)("div",{className:"w-[15%] sm:w-[20%] md:w-[25%] relative",children:[(0,s.jsx)(l.default,{src:"/decorations/leavesright.webp",alt:"D\xe9coration droite",fill:!0,className:"object-cover opacity-20"}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 w-1/3 bg-gradient-to-l from-transparent to-[#0f0f0f]"})]})]}),(0,s.jsx)("div",{className:"relative z-10 pt-24 sm:pt-28 pb-24",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-5xl px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-didot text-center text-[#C4B5A2] mb-12",children:"Mes R\xe9servations"}),(0,s.jsx)("div",{className:"flex justify-center mb-8",children:(0,s.jsxs)("div",{className:"flex rounded-lg bg-[#2a2a2a]/70 p-1 border border-[#3a3a3a]/50",children:[(0,s.jsx)("button",{onClick:()=>C("reservations"),className:"px-6 py-3 rounded-md transition-colors font-medium ".concat("reservations"===w?"bg-[#C4B5A2] text-black":"text-gray-300 hover:text-white hover:bg-[#2a2a2a]"),children:"Tables"}),(0,s.jsx)("button",{onClick:()=>C("orders"),className:"px-6 py-3 rounded-md transition-colors font-medium ".concat("orders"===w?"bg-[#C4B5A2] text-black":"text-gray-300 hover:text-white hover:bg-[#2a2a2a]"),children:"Fruits de mer"})]})}),"reservations"===w?0===e.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-[#2a2a2a]/50 rounded-xl border border-[#3a3a3a]/50",children:[(0,s.jsx)("h2",{className:"text-2xl font-medium text-gray-300 mb-4",children:"Vous n'avez pas encore de r\xe9servations"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"R\xe9servez une table d\xe8s maintenant pour profiter de notre cuisine exotique !"}),(0,s.jsx)("button",{onClick:()=>x.push("/reserver"),className:"bg-[#C4B5A2] hover:bg-[#A69783] text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Faire une r\xe9servation"})]}):(0,s.jsx)(s.Fragment,{children:(()=>{let t=ed(e);return 0===t.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-[#2a2a2a]/50 rounded-xl border border-[#3a3a3a]/50",children:[(0,s.jsx)("h2",{className:"text-2xl font-medium text-gray-300 mb-4",children:"Vous n'avez pas de r\xe9servations \xe0 venir"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"R\xe9servez une table d\xe8s maintenant pour profiter de notre cuisine exotique !"}),(0,s.jsx)("button",{onClick:()=>x.push("/reserver"),className:"bg-[#C4B5A2] hover:bg-[#A69783] text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Faire une r\xe9servation"})]}):(0,s.jsx)("div",{className:"grid gap-6 md:gap-8",children:t.map(e=>(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/50 rounded-xl border border-[#3a3a3a]/50 p-6 flex flex-col md:flex-row md:items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-grow mb-4 md:mb-0",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)("span",{className:"text-[#C4B5A2] text-xl font-semibold",children:el(e.date)}),(0,s.jsxs)("span",{className:"ml-2 px-2 py-1 bg-[#C4B5A2]/20 rounded text-sm text-[#C4B5A2]",children:[e.time," "]})]}),(0,s.jsxs)("p",{className:"text-gray-300",children:[(0,s.jsx)("span",{className:"font-medium",children:e.guests})," ",e.guests>1?"personnes":"personne"]}),e.specialRequests&&(0,s.jsxs)("p",{className:"text-gray-400 mt-2 text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Demandes sp\xe9ciales :"})," ",e.specialRequests]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{console.log("Modification de la r\xe9servation:",e),eb(e)},className:"px-4 py-2 border border-blue-500/70 text-blue-400 hover:bg-blue-500/10 rounded transition-colors",children:"Modifier"}),(0,s.jsx)("button",{onClick:()=>eo(e.id),className:"px-4 py-2 border border-red-500/70 text-red-400 hover:bg-red-500/10 rounded transition-colors",children:"Annuler"})]})]},e.id))})})()}):0===f.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-[#2a2a2a]/50 rounded-xl border border-[#3a3a3a]/50",children:[(0,s.jsx)("h2",{className:"text-2xl font-medium text-gray-300 mb-4",children:"Vous n'avez pas encore de commandes de fruits de mer"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"Commandez d\xe8s maintenant nos plateaux et compositions de fruits de mer !"}),(0,s.jsx)("button",{onClick:()=>x.push("/commander"),className:"bg-[#C4B5A2] hover:bg-[#A69783] text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Commander des fruits de mer"})]}):(0,s.jsx)(s.Fragment,{children:(()=>{let e=eu(f);return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-[#2a2a2a]/50 rounded-xl border border-[#3a3a3a]/50",children:[(0,s.jsx)("h2",{className:"text-2xl font-medium text-gray-300 mb-4",children:"Vous n'avez pas de commandes \xe0 venir"}),(0,s.jsx)("p",{className:"text-gray-400 mb-6",children:"Commandez d\xe8s maintenant nos plateaux et compositions de fruits de mer !"}),(0,s.jsx)("button",{onClick:()=>x.push("/commander"),className:"bg-[#C4B5A2] hover:bg-[#A69783] text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Commander des fruits de mer"})]}):(0,s.jsx)("div",{className:"grid gap-6 md:gap-8",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/50 rounded-xl border border-[#3a3a3a]/50 p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-grow mb-4 md:mb-0",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)("span",{className:"text-[#C4B5A2] text-xl font-semibold",children:el(e.pickupDate)}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 bg-[#C4B5A2]/20 rounded text-sm text-[#C4B5A2]",children:ec(e.pickupTime)}),(0,s.jsx)("span",{className:"ml-2 px-2 py-1 bg-green-500/20 rounded text-sm text-green-400",children:e.isPickup?"\xc0 emporter":"Livraison"})]}),(0,s.jsxs)("p",{className:"text-gray-300",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total:"})," ",(()=>{let t="number"!=typeof e.totalPrice||isNaN(e.totalPrice)?0:e.totalPrice;return"".concat(t.toFixed(2)," €")})()]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>em(e),className:"px-4 py-2 border border-blue-500/70 text-blue-400 hover:bg-blue-500/10 rounded transition-colors",children:"Modifier"}),(0,s.jsx)("button",{onClick:()=>ex(e.id),className:"px-4 py-2 border border-red-500/70 text-red-400 hover:bg-red-500/10 rounded transition-colors",children:"Annuler"})]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-[#3a3a3a]",children:[e.plateaux.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"text-lg font-medium text-[#C4B5A2] mb-2",children:"Plateaux"}),(0,s.jsx)("div",{className:"space-y-2",children:e.plateaux.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[e.quantity," \xd7 ",e.name]}),(0,s.jsxs)("span",{className:"text-gray-400",children:[(es(e.quantity)*es(e.price)).toFixed(2)," €"]})]},t))})]}),e.items.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-medium text-[#C4B5A2] mb-2",children:"Fruits de mer \xe0 l'unit\xe9"}),(0,s.jsx)("div",{className:"space-y-2",children:e.items.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[e.quantity," \xd7 ",e.name," ",e.half?"(demi-douzaine)":""]}),(0,s.jsxs)("span",{className:"text-gray-400",children:[(es(e.quantity)*es(e.price)).toFixed(2)," €"]})]},t))})]}),e.specialRequests&&(0,s.jsxs)("div",{className:"mt-4 text-gray-400 text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"Demandes sp\xe9ciales:"})," ",e.specialRequests]})]})]},e.id))})})()})]})}),null!==H&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#2a2a2a] rounded-xl p-6 max-w-md w-full mx-4 border border-[#3a3a3a]/50 shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center text-amber-400 mb-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 mr-3 flex items-center justify-center rounded-full bg-amber-400/20",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,s.jsx)("h3",{className:"text-xl font-semibold",children:"Confirmer l'annulation"})]}),(0,s.jsx)("p",{className:"text-gray-300 mb-6 pl-11",children:"\xcates-vous s\xfbr de vouloir annuler cette r\xe9servation ? Cette action est irr\xe9versible."}),(0,s.jsx)("div",{className:"mb-4 pl-11",children:(0,s.jsxs)("label",{className:"flex items-center text-gray-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:_,onChange:e=>Y(e.target.checked),className:"h-4 w-4 bg-[#3a3a3a] border-[#4a4a4a] rounded mr-2"}),"M'envoyer un SMS de confirmation"]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>{V(null)},className:"px-5 py-2 rounded bg-transparent border border-gray-500 hover:bg-gray-700 transition-colors",children:"Non, garder"}),(0,s.jsx)("button",{onClick:ei,className:"px-5 py-2 rounded bg-red-600/80 text-white hover:bg-red-700 transition-colors",children:"Oui, annuler"})]})]})}),null!==G&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#2a2a2a] rounded-xl p-6 max-w-md w-full mx-4 border border-[#3a3a3a]/50 shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center text-amber-400 mb-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 mr-3 flex items-center justify-center rounded-full bg-amber-400/20",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,s.jsx)("h3",{className:"text-xl font-semibold",children:"Confirmer l'annulation"})]}),(0,s.jsx)("p",{className:"text-gray-300 mb-6 pl-11",children:"\xcates-vous s\xfbr de vouloir annuler cette commande de fruits de mer ? Cette action est irr\xe9versible."}),(0,s.jsx)("div",{className:"mb-4 pl-11",children:(0,s.jsxs)("label",{className:"flex items-center text-gray-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:_,onChange:e=>Y(e.target.checked),className:"h-4 w-4 bg-[#3a3a3a] border-[#4a4a4a] rounded mr-2"}),"M'envoyer un SMS de confirmation"]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>{U(null)},className:"px-5 py-2 rounded bg-transparent border border-gray-500 hover:bg-gray-700 transition-colors",children:"Non, garder"}),(0,s.jsx)("button",{onClick:eg,className:"px-5 py-2 rounded bg-red-600/80 text-white hover:bg-red-700 transition-colors",children:"Oui, annuler"})]})]})}),A&&(0,s.jsx)(d,{title:"R\xe9servations du ".concat(new Date(T.date).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})),onClose:()=>R(!1),children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-xl font-medium",children:"Modifier la r\xe9servation"}),(0,s.jsxs)("form",{onSubmit:en,className:"space-y-5",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nom du client*"}),(0,s.jsx)("input",{type:"text",name:"customerName",value:(null==S?void 0:S.customerName)||"",disabled:!0,className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none text-gray-300"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"T\xe9l\xe9phone*"}),(0,s.jsx)("input",{type:"tel",name:"customerPhone",value:(null==S?void 0:S.customerPhone)||"",disabled:!0,className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none text-gray-300"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email (optionnel)"}),(0,s.jsx)("input",{type:"email",name:"customerEmail",value:(null==S?void 0:S.customerEmail)||"",disabled:!0,className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none text-gray-300"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre de personnes*"}),(0,s.jsx)("select",{name:"guests",value:T.guests,onChange:ea,className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none focus:ring-2 focus:ring-[#C4B5A2]",required:!0,children:Array.from({length:10},(e,t)=>t+1).map(e=>(0,s.jsxs)("option",{value:e,children:[e," ",e>1?"personnes":"personne"]},e))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Cr\xe9neau horaire*"}),(0,s.jsxs)("div",{className:"bg-[#2a2a2a]/90 rounded-xl p-4 border border-[#C4B5A2]/20",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Horaires disponibles"}),(0,s.jsxs)("p",{className:"text-gray-400 mb-4",children:["pour le ",new Date(T.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-md font-medium mb-3 text-[#C4B5A2]",children:"D\xe9jeuner"}),(0,s.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2",children:["12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30"].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>D(t=>({...t,time:e})),className:"py-2 px-3 rounded-lg text-center transition-colors ".concat(T.time===e?"bg-[#C4B5A2] text-black font-medium":"bg-[#1A1A1A] hover:bg-[#2a2a2a] text-white border border-[#C4B5A2]/30"),children:e},"lunch-".concat(e)))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-md font-medium mb-3 text-[#C4B5A2]",children:"D\xeener"}),(0,s.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-2",children:["19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00","22:15","22:30"].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>D(t=>({...t,time:e})),className:"py-2 px-3 rounded-lg text-center transition-colors ".concat(T.time===e?"bg-[#C4B5A2] text-black font-medium":"bg-[#1A1A1A] hover:bg-[#2a2a2a] text-white border border-[#C4B5A2]/30"),children:e},"dinner-".concat(e)))})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Demandes sp\xe9ciales"}),(0,s.jsx)("textarea",{name:"specialRequests",value:T.specialRequests||"",onChange:ea,className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none focus:ring-2 focus:ring-[#C4B5A2] min-h-[100px]",placeholder:"Allergies, pr\xe9f\xe9rences de table, etc."})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center text-gray-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:_,onChange:e=>Y(e.target.checked),className:"h-4 w-4 bg-[#3a3a3a] border-[#4a4a4a] rounded mr-2"}),"M'envoyer un SMS de confirmation"]})}),(0,s.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>R(!1),className:"px-5 py-2 rounded bg-transparent border border-gray-500 hover:bg-gray-700 transition-colors",children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:O,className:"px-5 py-2 rounded bg-[#C4B5A2] hover:bg-[#A69783] text-black font-medium transition-colors disabled:opacity-50",children:O?"Modification en cours...":"Enregistrer"})]})]})]})}),B&&(0,s.jsx)(d,{title:"Commande de fruits de mer du ".concat(new Date(z.pickupDate).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})),onClose:()=>I(!1),children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-xl font-medium",children:"Modifier votre commande"}),(0,s.jsxs)("form",{onSubmit:eh,className:"space-y-5",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date de retrait*"}),(0,s.jsx)("input",{type:"date",name:"pickupDate",value:z.pickupDate,onChange:ep,min:new Date().toISOString().split("T")[0],className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none focus:ring-2 focus:ring-[#C4B5A2]",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Heure de retrait*"}),(0,s.jsx)("select",{name:"pickupTime",value:z.pickupTime,onChange:ep,className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none focus:ring-2 focus:ring-[#C4B5A2]",required:!0,children:["10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Mode de r\xe9cup\xe9ration*"}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-2",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:"isPickup",value:"true",checked:!0===z.isPickup,onChange:ep,className:"h-4 w-4 mr-2"}),(0,s.jsx)("span",{children:"\xc0 emporter"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:"isPickup",value:"false",checked:!1===z.isPickup,onChange:ep,className:"h-4 w-4 mr-2"}),(0,s.jsx)("span",{children:"Livraison"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Demandes sp\xe9ciales"}),(0,s.jsx)("textarea",{name:"specialRequests",value:z.specialRequests||"",onChange:ep,className:"w-full p-2 rounded bg-[#333333] border border-[#4a4a4a] focus:outline-none focus:ring-2 focus:ring-[#C4B5A2] min-h-[100px]",placeholder:"Instructions particuli\xe8res pour votre commande..."})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center text-gray-300",children:[(0,s.jsx)("input",{type:"checkbox",checked:_,onChange:e=>Y(e.target.checked),className:"h-4 w-4 bg-[#3a3a3a] border-[#4a4a4a] rounded mr-2"}),"M'envoyer un SMS de confirmation"]})}),(0,s.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>I(!1),className:"px-5 py-2 rounded bg-transparent border border-gray-500 hover:bg-gray-700 transition-colors",children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:O,className:"px-5 py-2 rounded bg-[#C4B5A2] hover:bg-[#A69783] text-black font-medium transition-colors disabled:opacity-50",children:O?"Modification en cours...":"Enregistrer"})]})]})]})})]})}},17146:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,h:()=>o});var s=r(95155),a=r(12115);let n=(0,a.createContext)(void 0);function o(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function i(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[i,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&(o(JSON.parse(e)),l(t))}catch(e){console.error("Error loading auth state from localStorage:",e)}finally{d(!1)}})()},[]);let u=async(e,t)=>{d(!0);try{console.log("Tentative de connexion pour ".concat(e));let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),s=await r.json();if(console.log("R\xe9ponse de l'API login:",r.status,s),!r.ok)throw Error(s.message||"Erreur lors de la connexion");if(!s.user||!s.token)throw console.error("Donn\xe9es de connexion incompl\xe8tes:",s),Error("Donn\xe9es de connexion incompl\xe8tes");return s.user.role||(console.warn('R\xf4le utilisateur non d\xe9fini, d\xe9finition par d\xe9faut \xe0 "user"'),s.user.role="user"),console.log("Utilisateur authentifi\xe9 avec r\xf4le:",s.user.role),localStorage.setItem("user",JSON.stringify(s.user)),localStorage.setItem("token",s.token),o(s.user),l(s.token),console.log("Connexion r\xe9ussie pour:",s.user.email),!0}catch(e){return console.error("Erreur de connexion:",e),!1}finally{d(!1)}},m=async(e,t,r,s)=>{d(!0);try{console.log("Tentative d'inscription pour ".concat(t));let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:r,phoneNumber:s})}),n=await a.json();if(console.log("R\xe9ponse de l'API inscription:",a.status,n),!a.ok)throw Error(n.message||"Erreur lors de l'inscription");if(!n.user||!n.token)throw console.error("Donn\xe9es d'inscription incompl\xe8tes:",n),Error("Donn\xe9es d'inscription incompl\xe8tes");return n.user.role||(console.warn('R\xf4le utilisateur non d\xe9fini, d\xe9finition par d\xe9faut \xe0 "user"'),n.user.role="user"),console.log("Nouvel utilisateur inscrit avec r\xf4le:",n.user.role),localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("token",n.token),o(n.user),l(n.token),console.log("Inscription r\xe9ussie pour:",n.user.email),!0}catch(e){return console.error("Erreur d'inscription:",e),!1}finally{d(!1)}},p=async()=>{if(!i)return!1;try{return(await fetch("/api/auth/check",{method:"GET",headers:{Authorization:"Bearer ".concat(i)}})).ok}catch(e){return console.error("Erreur lors de la v\xe9rification du token:",e),!1}},h=async()=>{if(!r||!r.email)return!1;try{let e=await fetch("/api/auth/user?email=".concat(encodeURIComponent(r.email)),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)return!1;let t=await e.json();return localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("token",t.token),o(t.user),l(t.token),!0}catch(e){return console.error("Erreur lors du rafra\xeechissement de la connexion:",e),!1}};return(0,s.jsx)(n.Provider,{value:{user:r,token:i,isLoading:c,isAuthenticated:!!r,login:u,register:m,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),o(null),l(null),console.log("D\xe9connexion effectu\xe9e")},checkToken:p,refreshLogin:h},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5565,4069,8441,1517,7358],()=>t(13233)),_N_E=e.O()}]);