(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{77863:(e,t,s)=>{Promise.resolve().then(s.bind(s,74920))},98867:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},93518:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},46967:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},60872:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},33473:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},45686:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},40767:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(67401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},74920:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(95155),r=s(12115),l=s(5565),n=s(17146),i=s(98867),o=s(40767),c=s(93518),d=s(46967),u=s(60872),m=s(45686),p=s(33473),h=s(55037);let g="https://api.votredomaine.com";function x(){let{user:e,token:t}=(0,n.h)(),[s,x]=(0,r.useState)("entrees"),[b,j]=(0,r.useState)(!1),[f,v]=(0,r.useState)(null),[y,N]=(0,r.useState)(!1),[w,C]=(0,r.useState)(0),[A,k]=(0,r.useState)(0),[E,S]=(0,r.useState)(0),[z,P]=(0,r.useState)(!1),[B,R]=(0,r.useState)(!1),[F,T]=(0,r.useState)({}),[O,M]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=()=>{P(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{I()},[]);let I=async()=>{try{let e=await fetch("".concat(g,"/carte"));if(!e.ok)throw Error("Failed to load menu items");let t=await e.json(),s={};for(let e in t)s[e]=[...t[e]].sort((e,t)=>e.price-t.price);T(s),M(!1)}catch(e){console.error("Failed to load menu items:",e),h.oR.error("Erreur lors du chargement du menu"),M(!1)}},[D,J]=(0,r.useState)({name:"",description:"",price:"",imagePath:"",category:s}),[V,L]=(0,r.useState)(!1);(0,r.useEffect)(()=>{b||J(e=>({...e,category:s}))},[s,b]);let _=async e=>{if(!e)return null;L(!0);try{let s=new FormData;s.append("file",e);let a=await fetch("".concat(g,"/uploads/image"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:s});if(!a.ok)throw Error("Erreur lors de l'upload de l'image");let r=await a.json();return L(!1),r.imagePath}catch(e){return console.error("Failed to upload image:",e),h.oR.error("Erreur lors de l'upload de l'image"),L(!1),null}},H=async()=>{try{if(V){h.oR.error("Upload d'image en cours, veuillez patienter");return}let e=await fetch("".concat(g,"/carte"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:D.name,description:D.description,price:parseFloat(D.price),imagePath:D.imagePath,category:D.category})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to add menu item")}await I(),N(!1),x(D.category),J({name:"",description:"",price:"",imagePath:"",category:D.category}),h.oR.success("Plat ajout\xe9 avec succ\xe8s")}catch(e){console.error("Failed to add menu item:",e),h.oR.error("Erreur lors de l'ajout du plat")}},U=async e=>{v(e),J({name:e.name,description:e.description,price:e.price.toString(),imagePath:e.imagePath||"",category:e.category}),j(!0)},q=async()=>{if(f)try{let e=await fetch("".concat(g,"/carte/").concat(f.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:D.name,description:D.description,price:parseFloat(D.price),imagePath:D.imagePath,category:D.category})});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to update menu item")}await I(),j(!1),v(null),h.oR.success("Plat mis \xe0 jour avec succ\xe8s")}catch(e){console.error("Failed to update menu item:",e),h.oR.error("Erreur lors de la mise \xe0 jour du plat")}},W=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce plat ?"))try{let s=await fetch("".concat(g,"/carte/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to delete menu item")}await I(),h.oR.success("Plat supprim\xe9 avec succ\xe8s")}catch(e){console.error("Failed to delete menu item:",e),h.oR.error("Erreur lors de la suppression du plat")}},[X]=(0,r.useState)([{id:"entrees",name:"Entr\xe9es"},{id:"plats",name:"Plats"},{id:"desserts",name:"Desserts"},{id:"boissons",name:"Boissons"}]),G=()=>{!B&&F[s]&&0!==F[s].length&&(R(!0),C(e=>e===F[s].length-1?0:e+1),setTimeout(()=>R(!1),300))},K=()=>{!B&&F[s]&&0!==F[s].length&&(R(!0),C(e=>0===e?F[s].length-1:e-1),setTimeout(()=>R(!1),300))},Q=e=>{k(e.touches[0].clientX)},Y=e=>{S(e.touches[0].clientX)},Z=()=>{if(!A||!E)return;let e=A-E;e>50&&G(),e<-50&&K(),k(0),S(0)},$=e=>e?e.startsWith("http")?e:e.startsWith("/uploads/")?"".concat(g).concat(e):"".concat(g,"/uploads").concat(e):"/image2.png",ee=e=>e&&""!==e;return(0,a.jsxs)("section",{children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("h2",{className:"text-4xl font-didot-bold mb-4",children:"Notre Carte"}),(0,a.jsx)("div",{className:"w-24 h-1 bg-[#C4B5A2] mx-auto mb-8"}),(0,a.jsx)("p",{className:"text-gray-400",children:"D\xe9couvrez notre s\xe9lection de plats exotiques"})]}),(0,a.jsx)("div",{className:"flex justify-center mb-12 overflow-x-auto",children:(0,a.jsx)("div",{className:"inline-flex rounded-lg border border-[#C4B5A2] bg-[#2a2a2a] p-1",children:X.map(e=>(0,a.jsx)("button",{onClick:()=>{x(e.id),C(0)},className:"px-6 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ".concat(s===e.id?"bg-[#C4B5A2] text-white":"text-gray-400 hover:text-white"),children:e.name},e.id))})}),(null==e?void 0:e.role)==="admin"&&!y&&!b&&(0,a.jsx)("div",{className:"mb-8 flex justify-center",children:(0,a.jsxs)("button",{onClick:()=>N(!0),className:"flex items-center gap-2 bg-[#C4B5A2] text-black px-4 py-2 rounded-md hover:bg-[#a39482]",children:[(0,a.jsx)(p.A,{size:20}),"Ajouter un plat"]})}),(y||b)&&(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-xl p-8 border-2 border-[#C4B5A2] mb-8",children:[(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Nom du plat",value:D.name,onChange:e=>J({...D,name:e.target.value})}),(0,a.jsx)("textarea",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Description",value:D.description,onChange:e=>J({...D,description:e.target.value})}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Prix (ex: 14)",type:"number",value:D.price,onChange:e=>J({...D,price:e.target.value})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("input",{className:"w-full p-2 bg-gray-800 rounded",placeholder:"Chemin de l'image (ex: entrees/salade.jpg)",value:D.imagePath,onChange:e=>J({...D,imagePath:e.target.value})}),(0,a.jsxs)("div",{className:"mt-2 relative border-2 border-dashed border-gray-600 rounded p-4",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:async e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0],s=await _(t);s&&(J({...D,imagePath:s}),h.oR.success("Image t\xe9l\xe9charg\xe9e avec succ\xe8s"))}}}),(0,a.jsx)("div",{className:"text-center text-gray-400",children:V?(0,a.jsx)("p",{children:"Upload en cours..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"D\xe9posez votre image ici ou cliquez pour s\xe9lectionner"}),D.imagePath&&(0,a.jsxs)("p",{className:"text-green-500 mt-2",children:["Image s\xe9lectionn\xe9e: ",D.imagePath.split("/").pop()]})]})})]})]}),(0,a.jsx)("select",{className:"w-full mb-4 p-2 bg-gray-800 rounded",value:D.category,onChange:e=>J({...D,category:e.target.value}),children:X.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,a.jsxs)("button",{onClick:b?q:H,className:"flex items-center gap-2 bg-green-600 px-6 py-2 rounded hover:bg-green-700 disabled:opacity-50",disabled:V,children:[(0,a.jsx)(i.A,{size:20}),b?"Mettre \xe0 jour":"Ajouter"]}),(0,a.jsxs)("button",{onClick:()=>{N(!1),j(!1),v(null)},className:"flex items-center gap-2 bg-red-600 px-6 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(o.A,{size:20}),"Annuler"]})]})]}),z?(()=>{if(!F[s]||0===F[s].length)return(0,a.jsx)("div",{className:"bg-[#2a2a2a] rounded-xl p-8 text-center",children:(0,a.jsx)("p",{children:"Aucun plat disponible dans cette cat\xe9gorie."})});let t=F[s][w];return(0,a.jsxs)("div",{className:"relative bg-[#2a2a2a] rounded-xl shadow-lg overflow-hidden border border-[#C4B5A2]",onTouchStart:Q,onTouchMove:Y,onTouchEnd:Z,children:[ee(t.imagePath)&&(0,a.jsxs)("div",{className:"relative h-64 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/30 z-10"}),(0,a.jsx)("div",{className:"relative h-full transition-transform duration-300 ease-in-out ".concat(B?"opacity-50":"opacity-100"),children:(0,a.jsx)(l.default,{src:$(t.imagePath),alt:t.name,fill:!0,className:"object-cover",sizes:"100vw",priority:!0})}),(0,a.jsx)("button",{onClick:K,className:"absolute left-2 top-1/2 -translate-y-1/2 z-20 bg-black/50 p-2 rounded-full hover:bg-black/70",children:(0,a.jsx)(c.A,{size:24})}),(0,a.jsx)("button",{onClick:G,className:"absolute right-2 top-1/2 -translate-y-1/2 z-20 bg-black/50 p-2 rounded-full hover:bg-black/70",children:(0,a.jsx)(d.A,{size:24})}),(0,a.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 z-20 flex gap-2",children:F[s].map((e,t)=>(0,a.jsx)("button",{onClick:()=>C(t),className:"w-2 h-2 rounded-full transition-colors ".concat(t===w?"bg-white":"bg-white/50")},t))})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold flex-1 pr-4",children:t.name}),(0,a.jsxs)("span",{className:"text-lg font-bold text-[#C4B5A2] whitespace-nowrap",children:[Number(t.price).toFixed(2).replace(".",",")," €"]})]}),(0,a.jsx)("p",{className:"text-gray-400",children:t.description}),(null==e?void 0:e.role)==="admin"&&(0,a.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>U(t),className:"flex items-center gap-2 bg-blue-600 px-4 py-2 rounded hover:bg-blue-700",children:[(0,a.jsx)(u.A,{size:20}),"Modifier"]}),(0,a.jsxs)("button",{onClick:()=>W(t.id),className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(m.A,{size:20}),"Supprimer"]})]})]})]})})():F[s]&&0!==F[s].length?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:F[s].map((t,s)=>(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-xl shadow-lg overflow-hidden border border-[#C4B5A2]",children:[ee(t.imagePath)&&(0,a.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/30 z-10"}),(0,a.jsx)(l.default,{src:$(t.imagePath),alt:t.name,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold flex-1 pr-4",children:t.name}),(0,a.jsxs)("span",{className:"text-lg font-bold text-[#C4B5A2] whitespace-nowrap",children:[Number(t.price).toFixed(2).replace(".",",")," €"]})]}),(0,a.jsx)("p",{className:"text-gray-400",children:t.description}),(null==e?void 0:e.role)==="admin"&&(0,a.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>U(t),className:"flex items-center gap-2 bg-blue-600 px-4 py-2 rounded hover:bg-blue-700",children:[(0,a.jsx)(u.A,{size:20}),"Modifier"]}),(0,a.jsxs)("button",{onClick:()=>W(t.id),className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(m.A,{size:20}),"Supprimer"]})]})]})]},s))}):(0,a.jsx)("div",{className:"bg-[#2a2a2a] rounded-xl p-8 text-center",children:(0,a.jsx)("p",{children:"Aucun plat disponible dans cette cat\xe9gorie."})})]})}let b="https://api.votredomaine.com";function j(){let{user:e,token:t}=(0,n.h)(),[s,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null),[j,f]=(0,r.useState)(!1),[v,y]=(0,r.useState)({name:"",price:"",items:[""],info:"",highlight:!1});(0,r.useEffect)(()=>{N()},[]);let N=async()=>{try{d(!0);let e=await fetch("".concat(b,"/menus"));if(!e.ok)throw Error("Failed to load menus");let t=await e.json();l(t),d(!1)}catch(e){console.error("Failed to load menus:",e),h.oR.error("Erreur lors du chargement des menus"),d(!1)}},w=e=>{x(e);let t=s[e];y({name:t.name,price:t.price,items:[...t.items],info:t.info||"",highlight:t.highlight})},C=async e=>{try{let a=s[e];if(!(await fetch("".concat(b,"/menus/").concat(a.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(v)})).ok)throw Error("Failed to update menu");await N(),x(null),h.oR.success("Menu mis \xe0 jour avec succ\xe8s")}catch(e){console.error("Error updating menu:",e),h.oR.error("Erreur lors de la mise \xe0 jour du menu")}},A=async e=>{try{let a=s[e];if(!(await fetch("".concat(b,"/menus/").concat(a.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw Error("Failed to delete menu");await N(),h.oR.success("Menu supprim\xe9 avec succ\xe8s")}catch(e){console.error("Error deleting menu:",e),h.oR.error("Erreur lors de la suppression du menu")}},k=async()=>{try{if(!(await fetch("".concat(b,"/menus"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(v)})).ok)throw Error("Failed to create menu");await N(),f(!1),y({name:"",price:"",items:[""],info:"",highlight:!1}),h.oR.success("Menu ajout\xe9 avec succ\xe8s")}catch(e){console.error("Error creating menu:",e),h.oR.error("Erreur lors de la cr\xe9ation du menu")}},E=()=>{y({...v,items:[...v.items,""]})},S=e=>{y({...v,items:v.items.filter((t,s)=>s!==e)})};return c?(0,a.jsxs)("section",{className:"mb-20",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Nos Menus"}),(0,a.jsx)("div",{className:"w-24 h-1 bg-[#C4B5A2] mx-auto"})]}),(0,a.jsx)("div",{className:"text-center text-gray-400",children:"Chargement des menus..."})]}):(0,a.jsxs)("section",{className:"mb-20",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("h2",{className:"text-4xl font-didot-bold mb-4",children:"Nos Menus"}),(0,a.jsx)("div",{className:"w-24 h-1 bg-[#C4B5A2] mx-auto"})]}),(null==e?void 0:e.role)==="admin"&&!j&&(0,a.jsxs)("button",{onClick:()=>f(!0),className:"mb-8 flex items-center gap-2 bg-[#C4B5A2] text-black px-4 py-2 rounded-md hover:bg-[#a39482]",children:[(0,a.jsx)(p.A,{size:20}),"Ajouter un menu"]}),j&&(0,a.jsxs)("div",{className:"mb-8 bg-[#2a2a2a] rounded-xl p-8 border-2 border-[#C4B5A2]",children:[(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Nom du menu",value:v.name,onChange:e=>y({...v,name:e.target.value})}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Prix",value:v.price,onChange:e=>y({...v,price:e.target.value})}),v.items.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsx)("input",{className:"flex-1 p-2 bg-gray-800 rounded",placeholder:"Item du menu",value:e,onChange:e=>{let s=[...v.items];s[t]=e.target.value,y({...v,items:s})}}),(0,a.jsx)("button",{onClick:()=>S(t),className:"p-2 bg-red-600 rounded hover:bg-red-700",children:(0,a.jsx)(o.A,{size:20})})]},t)),(0,a.jsxs)("button",{onClick:E,className:"mb-4 flex items-center gap-2 bg-gray-700 px-4 py-2 rounded hover:bg-gray-600",children:[(0,a.jsx)(p.A,{size:20}),"Ajouter un item"]}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Information suppl\xe9mentaire",value:v.info,onChange:e=>y({...v,info:e.target.value})}),(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.highlight,onChange:e=>y({...v,highlight:e.target.checked})}),(0,a.jsx)("label",{children:"Mettre en \xe9vidence"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:k,className:"flex items-center gap-2 bg-green-600 px-4 py-2 rounded hover:bg-green-700",children:[(0,a.jsx)(i.A,{size:20}),"Sauvegarder"]}),(0,a.jsxs)("button",{onClick:()=>f(!1),className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(o.A,{size:20}),"Annuler"]})]})]}),0===s.length&&!j&&(0,a.jsx)("div",{className:"text-center text-gray-400",children:"Aucun menu disponible pour le moment."}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.map((t,s)=>(0,a.jsx)("div",{className:"\n              bg-[#2a2a2a] rounded-xl p-8 border-2\n              ".concat(t.highlight?"border-[#C4B5A2] shadow-lg shadow-[#C4B5A2]/10":"border-[#5e5549]","\n            "),children:g===s?(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",value:v.name,onChange:e=>y({...v,name:e.target.value})}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",value:v.price,onChange:e=>y({...v,price:e.target.value})}),v.items.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsx)("input",{className:"flex-1 p-2 bg-gray-800 rounded",value:e,onChange:e=>{let s=[...v.items];s[t]=e.target.value,y({...v,items:s})}}),(0,a.jsx)("button",{onClick:()=>S(t),className:"p-2 bg-red-600 rounded hover:bg-red-700",children:(0,a.jsx)(o.A,{size:20})})]},t)),(0,a.jsxs)("button",{onClick:E,className:"mb-4 flex items-center gap-2 bg-gray-700 px-4 py-2 rounded hover:bg-gray-600",children:[(0,a.jsx)(p.A,{size:20}),"Ajouter un item"]}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Information suppl\xe9mentaire",value:v.info,onChange:e=>y({...v,info:e.target.value})}),(0,a.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:v.highlight,onChange:e=>y({...v,highlight:e.target.checked})}),(0,a.jsx)("label",{children:"Mettre en \xe9vidence"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>C(s),className:"flex items-center gap-2 bg-green-600 px-4 py-2 rounded hover:bg-green-700",children:[(0,a.jsx)(i.A,{size:20}),"Sauvegarder"]}),(0,a.jsxs)("button",{onClick:()=>x(null),className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(o.A,{size:20}),"Annuler"]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:t.name}),(0,a.jsx)("span",{className:"text-[#C4B5A2] font-bold",children:t.price})]}),(0,a.jsx)("ul",{className:"mb-4 space-y-2",children:t.items.map((e,t)=>(0,a.jsxs)("li",{className:"text-gray-300",children:["• ",e]},t))}),t.info&&(0,a.jsx)("p",{className:"text-sm text-gray-400 italic mb-4",children:t.info}),(null==e?void 0:e.role)==="admin"&&(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsxs)("button",{onClick:()=>w(s),className:"flex items-center gap-1 bg-blue-600 px-3 py-1 rounded text-sm hover:bg-blue-700",children:[(0,a.jsx)(u.A,{size:16}),"Modifier"]}),(0,a.jsxs)("button",{onClick:()=>A(s),className:"flex items-center gap-1 bg-red-600 px-3 py-1 rounded text-sm hover:bg-red-700",children:[(0,a.jsx)(m.A,{size:16}),"Supprimer"]})]})]})},s))})]})}let f="https://api.votredomaine.com";function v(){let{user:e,token:t}=(0,n.h)(),[s,l]=(0,r.useState)({}),[c,d]=(0,r.useState)({category:null,index:null}),[g,x]=(0,r.useState)(!1),[b,j]=(0,r.useState)("rouges"),[v,y]=(0,r.useState)(!0),[N,w]=(0,r.useState)({name:"",region:"",price:{bottle:"",glass:""},category:"rouges"}),C={rouges:"Vins Rouges",blancs:"Vins Blancs",roses:"Vins Ros\xe9s",champagnes:"Champagnes"};(0,r.useEffect)(()=>{A()},[]);let A=async()=>{try{let e=await fetch("".concat(f,"/wines"));if(!e.ok)throw Error("Failed to load wines");let t=await e.json(),s=Object.fromEntries(Object.entries(t).map(e=>{let[t,s]=e;return[t,s.sort((e,t)=>{let s=parseFloat(e.price.bottle.replace("€","").trim()),a=parseFloat(t.price.bottle.replace("€","").trim());return s-a})]}));l(s),y(!1)}catch(e){console.error("Failed to load wines:",e),h.oR.error("Erreur lors du chargement des vins"),y(!1)}},k=(e,t)=>{let a=s[e][t];d({category:e,index:t}),w({name:a.name,region:a.region,price:{bottle:a.price.bottle,glass:a.price.glass||""},category:a.category})},E=async(e,a)=>{try{let r=s[e][a],l={name:N.name,region:N.region,bottlePrice:N.price.bottle,glassPrice:N.price.glass||null,category:N.category},n=await fetch("".concat(f,"/wines/").concat(r.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(l)});if(!n.ok){let e=await n.json();throw Error(e.message||"Failed to update wine")}await A(),d({category:null,index:null}),h.oR.success("Vin mis \xe0 jour avec succ\xe8s")}catch(e){console.error("Failed to update wine:",e),h.oR.error("Erreur lors de la mise \xe0 jour du vin")}},S=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce vin ?"))try{let s=await fetch("".concat(f,"/wines/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to delete wine")}await A(),h.oR.success("Vin supprim\xe9 avec succ\xe8s")}catch(e){console.error("Failed to delete wine:",e),h.oR.error("Erreur lors de la suppression du vin")}},z=async()=>{try{let e={name:N.name,region:N.region,bottlePrice:N.price.bottle,glassPrice:N.price.glass||null,category:b},s=await fetch("".concat(f,"/wines"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to add wine")}await A(),x(!1),w({name:"",region:"",price:{bottle:"",glass:""},category:b}),h.oR.success("Vin ajout\xe9 avec succ\xe8s")}catch(e){console.error("Failed to add wine:",e),h.oR.error("Erreur lors de l'ajout du vin")}};return v?(0,a.jsx)("div",{className:"text-center py-8",children:"Chargement des vins..."}):(0,a.jsxs)("section",{className:"mb-20",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("h2",{className:"text-4xl font-didot-bold mb-4",children:"Notre Carte des Vins"}),(0,a.jsx)("div",{className:"w-24 h-1 bg-[#C4B5A2] mx-auto mb-8"})]}),(null==e?void 0:e.role)==="admin"&&!g&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("select",{className:"mr-4 p-2 bg-gray-800 rounded",value:b,onChange:e=>j(e.target.value),children:Object.entries(C).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,children:s},t)})}),(0,a.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center gap-2 bg-[#C4B5A2] text-black px-4 py-2 rounded-md hover:bg-[#a39482]",children:[(0,a.jsx)(p.A,{size:20}),"Ajouter un vin"]})]}),g&&(0,a.jsxs)("div",{className:"bg-[#2a2a2a] rounded-xl p-8 border-2 border-[#C4B5A2] mb-8",children:[(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Nom du vin",value:N.name,onChange:e=>w({...N,name:e.target.value})}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"R\xe9gion",value:N.region,onChange:e=>w({...N,region:e.target.value})}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Prix bouteille (ex: 35€)",value:N.price.bottle,onChange:e=>w({...N,price:{...N.price,bottle:e.target.value}})}),(0,a.jsx)("input",{className:"w-full mb-4 p-2 bg-gray-800 rounded",placeholder:"Prix verre (ex: 6€)",value:N.price.glass,onChange:e=>w({...N,price:{...N.price,glass:e.target.value}})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:z,className:"flex items-center gap-2 bg-green-600 px-4 py-2 rounded hover:bg-green-700",children:[(0,a.jsx)(i.A,{size:20}),"Sauvegarder"]}),(0,a.jsxs)("button",{onClick:()=>x(!1),className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(o.A,{size:20}),"Annuler"]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:Object.entries(s).map(t=>{let[s,r]=t;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-6 text-[#C4B5A2]",children:C[s]}),(0,a.jsx)("div",{className:"space-y-6",children:r.map((t,r)=>(0,a.jsx)("div",{className:"border-b border-[#C4B5A2]/20 pb-4",children:c.category===s&&c.index===r?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{className:"w-full p-2 bg-gray-800 rounded",value:N.name,onChange:e=>w({...N,name:e.target.value})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-800 rounded",value:N.region,onChange:e=>w({...N,region:e.target.value})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-800 rounded",value:N.price.bottle,onChange:e=>w({...N,price:{...N.price,bottle:e.target.value}})}),(0,a.jsx)("input",{className:"w-full p-2 bg-gray-800 rounded",value:N.price.glass,onChange:e=>w({...N,price:{...N.price,glass:e.target.value}})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>E(s,r),className:"flex items-center gap-2 bg-green-600 px-4 py-2 rounded hover:bg-green-700",children:[(0,a.jsx)(i.A,{size:20}),"Sauvegarder"]}),(0,a.jsxs)("button",{onClick:()=>d({category:null,index:null}),className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(o.A,{size:20}),"Annuler"]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold",children:t.name}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:t.region})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-[#C4B5A2]",children:t.price.bottle&&!t.price.bottle.includes("€")?"".concat(t.price.bottle," €"):t.price.bottle}),t.price.glass&&(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Verre : ",t.price.glass&&!t.price.glass.includes("€")?"".concat(t.price.glass," €"):t.price.glass]})]})]}),(null==e?void 0:e.role)==="admin"&&(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsxs)("button",{onClick:()=>k(s,r),className:"flex items-center gap-2 bg-blue-600 px-4 py-2 rounded hover:bg-blue-700",children:[(0,a.jsx)(u.A,{size:20}),"Modifier"]}),(0,a.jsxs)("button",{onClick:()=>S(t.id),className:"flex items-center gap-2 bg-red-600 px-4 py-2 rounded hover:bg-red-700",children:[(0,a.jsx)(m.A,{size:20}),"Supprimer"]})]})]})},t.id))})]},s)})})]})}function y(){return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-[#0f0f0f] text-white relative",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40"}),(0,a.jsx)("main",{className:"flex-grow relative",children:(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex",children:[(0,a.jsxs)("div",{className:"w-[15%] sm:w-[20%] md:w-[25%] relative",children:[(0,a.jsx)(l.default,{src:"/decorations/leavesleft.webp",alt:"D\xe9coration gauche",fill:!0,className:"object-cover opacity-20",priority:!0}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 w-1/3 bg-gradient-to-r from-transparent to-[#0f0f0f]"})]}),(0,a.jsx)("div",{className:"flex-grow bg-[#0f0f0f]",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 md:px-8"})}),(0,a.jsxs)("div",{className:"w-[15%] sm:w-[20%] md:w-[25%] relative",children:[(0,a.jsx)(l.default,{src:"/decorations/leavesright.webp",alt:"D\xe9coration droite",fill:!0,className:"object-cover opacity-20",priority:!0}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 w-1/3 bg-gradient-to-l from-transparent to-[#0f0f0f]"})]})]}),(0,a.jsxs)("div",{className:"relative max-w-6xl mt-40 mx-auto px-4 sm:px-6 md:px-8 py-6 sm:py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-10 sm:mb-16",children:[(0,a.jsx)("h1",{className:"font-didot text-5xl sm:text-3xl md:text-4xl lg:text-6xl font-bold mb-2 md:mb-4",children:"Notre Carte & Menus"}),(0,a.jsx)("div",{className:"w-16 sm:w-24 h-1 bg-[#C4B5A2] mx-auto mb-3 sm:mb-4"})]}),(0,a.jsx)("div",{className:"bg-[#2a2a2a]/90 backdrop-blur-md rounded-xl p-4 sm:p-6 md:p-8 border border-[#C4B5A2]/20 shadow-xl mb-10 sm:mb-16",children:(0,a.jsx)(x,{})}),(0,a.jsxs)("div",{className:"flex items-center justify-center my-10 sm:my-16",children:[(0,a.jsx)("div",{className:"flex-grow h-px bg-[#C4B5A2]/20"}),(0,a.jsx)("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-[#C4B5A2] mx-3 sm:mx-4"}),(0,a.jsx)("div",{className:"flex-grow h-px bg-[#C4B5A2]/20"})]}),(0,a.jsx)("div",{className:"bg-[#2a2a2a]/90 backdrop-blur-md rounded-xl p-4 sm:p-6 md:p-8 border border-[#C4B5A2]/20 shadow-xl mb-10 sm:mb-16",children:(0,a.jsx)(j,{})}),(0,a.jsxs)("div",{className:"flex items-center justify-center my-10 sm:my-16",children:[(0,a.jsx)("div",{className:"flex-grow h-px bg-[#C4B5A2]/20"}),(0,a.jsx)("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-[#C4B5A2] mx-3 sm:mx-4"}),(0,a.jsx)("div",{className:"flex-grow h-px bg-[#C4B5A2]/20"})]}),(0,a.jsx)("div",{className:"bg-[#2a2a2a]/90 backdrop-blur-md rounded-xl p-4 sm:p-6 md:p-8 border border-[#C4B5A2]/20 shadow-xl mb-10 sm:mb-16",children:(0,a.jsx)(v,{})}),(0,a.jsxs)("div",{className:"mt-10 sm:mt-16 text-center text-gray-400 text-xs sm:text-sm border-t border-[#C4B5A2]/20 pt-6 sm:pt-8",children:[(0,a.jsx)("p",{children:"Les prix peuvent \xeatre modifi\xe9s sans pr\xe9avis. Tous nos plats sont pr\xe9par\xe9s sur place."}),(0,a.jsx)("p",{className:"mt-2",children:"Pour toute allergie ou r\xe9gime sp\xe9cial, veuillez nous consulter."})]})]})]})})]})}},17146:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>i,h:()=>n});var a=s(95155),r=s(12115);let l=(0,r.createContext)(void 0);function n(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function i(e){let{children:t}=e,[s,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("user"),t=localStorage.getItem("token");e&&t&&(n(JSON.parse(e)),o(t))}catch(e){console.error("Error loading auth state from localStorage:",e)}finally{d(!1)}})()},[]);let u=async(e,t)=>{d(!0);try{console.log("Tentative de connexion pour ".concat(e));let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await s.json();if(console.log("R\xe9ponse de l'API login:",s.status,a),!s.ok)throw Error(a.message||"Erreur lors de la connexion");if(!a.user||!a.token)throw console.error("Donn\xe9es de connexion incompl\xe8tes:",a),Error("Donn\xe9es de connexion incompl\xe8tes");return a.user.role||(console.warn('R\xf4le utilisateur non d\xe9fini, d\xe9finition par d\xe9faut \xe0 "user"'),a.user.role="user"),console.log("Utilisateur authentifi\xe9 avec r\xf4le:",a.user.role),localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("token",a.token),n(a.user),o(a.token),console.log("Connexion r\xe9ussie pour:",a.user.email),!0}catch(e){return console.error("Erreur de connexion:",e),!1}finally{d(!1)}},m=async(e,t,s,a)=>{d(!0);try{console.log("Tentative d'inscription pour ".concat(t));let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:s,phoneNumber:a})}),l=await r.json();if(console.log("R\xe9ponse de l'API inscription:",r.status,l),!r.ok)throw Error(l.message||"Erreur lors de l'inscription");if(!l.user||!l.token)throw console.error("Donn\xe9es d'inscription incompl\xe8tes:",l),Error("Donn\xe9es d'inscription incompl\xe8tes");return l.user.role||(console.warn('R\xf4le utilisateur non d\xe9fini, d\xe9finition par d\xe9faut \xe0 "user"'),l.user.role="user"),console.log("Nouvel utilisateur inscrit avec r\xf4le:",l.user.role),localStorage.setItem("user",JSON.stringify(l.user)),localStorage.setItem("token",l.token),n(l.user),o(l.token),console.log("Inscription r\xe9ussie pour:",l.user.email),!0}catch(e){return console.error("Erreur d'inscription:",e),!1}finally{d(!1)}},p=async()=>{if(!i)return!1;try{return(await fetch("/api/auth/check",{method:"GET",headers:{Authorization:"Bearer ".concat(i)}})).ok}catch(e){return console.error("Erreur lors de la v\xe9rification du token:",e),!1}},h=async()=>{if(!s||!s.email)return!1;try{let e=await fetch("/api/auth/user?email=".concat(encodeURIComponent(s.email)),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)return!1;let t=await e.json();return localStorage.setItem("user",JSON.stringify(t.user)),localStorage.setItem("token",t.token),n(t.user),o(t.token),!0}catch(e){return console.error("Erreur lors du rafra\xeechissement de la connexion:",e),!1}};return(0,a.jsx)(l.Provider,{value:{user:s,token:i,isLoading:c,isAuthenticated:!!s,login:u,register:m,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),n(null),o(null),console.log("D\xe9connexion effectu\xe9e")},checkToken:p,refreshLogin:h},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5565,4069,8441,1517,7358],()=>t(77863)),_N_E=e.O()}]);